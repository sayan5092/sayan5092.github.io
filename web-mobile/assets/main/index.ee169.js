window.__require=function t(e,i,n){function o(a,s){if(!i[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){return o(e[a][1][t]||t)},u,u.exports,t,e,i,n)}return i[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({AdaptCanvas:[function(t,e,i){"use strict";cc._RF.push(e,"2174f+PKGlGH7csvm0koWVs","AdaptCanvas");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../../const/EventName"),s=t("../../../util/Events"),c=cc._decorator,l=c.ccclass,u=(c.property,c.menu),p=c.disallowMultiple;cc.view.setResizeCallback(function(){s.default.emit(a.EventName.RESIZE)});var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){this.adapt()},e.prototype.adapt=function(){var t=cc.Canvas.instance.designResolution.width/cc.Canvas.instance.designResolution.height;cc.winSize.width/cc.winSize.height>t?(cc.Canvas.instance.fitHeight=!0,cc.Canvas.instance.fitWidth=!1):(cc.Canvas.instance.fitHeight=!1,cc.Canvas.instance.fitWidth=!0)},r([s.preloadEvent(a.EventName.RESIZE)],e.prototype,"adapt",null),r([l,s.eventsOnLoad(),p,u("Framework/UI\u7ec4\u4ef6/AdaptCanvas")],e)}(cc.Component);i.default=h,cc._RF.pop()},{"../../../const/EventName":"EventName","../../../util/Events":"Events"}],AdaptSize:[function(t,e,i){"use strict";cc._RF.push(e,"6c391dfrNBD95q+Uj9I1ejA","AdaptSize");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../../const/EventName"),s=t("../../../util/Events"),c=cc._decorator,l=c.ccclass,u=(c.property,c.menu),p=c.executeInEditMode,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){this.adapt()},e.prototype.adapt=function(){this.node.width=cc.winSize.width,this.node.height=cc.winSize.height},r([s.preloadEvent(a.EventName.RESIZE)],e.prototype,"adapt",null),r([l,s.eventsOnLoad(),p,u("Framework/UI\u7ec4\u4ef6/AdaptSize")],e)}(cc.Component);i.default=h,cc._RF.pop()},{"../../../const/EventName":"EventName","../../../util/Events":"Events"}],AnimValueLabel:[function(t,e,i){"use strict";cc._RF.push(e,"93188RmKh1GHJhJYMxNsu+u","AnimValueLabel");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./AnimValue"),s=cc._decorator,c=s.ccclass,l=(s.property,s.menu),u=s.requireComponent,p=s.executeInEditMode,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._label=null,e}return o(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return this._label||(this._label=this.getComponent(cc.Label)),this._label},enumerable:!1,configurable:!0}),e.prototype.onAnimUpdate=function(){this.label.string=""+Math.round(this.curValue)},r([c,p,u(cc.Label),l("Framework/UI\u7ec4\u4ef6/AnimValueLabel")],e)}(a.default);i.default=h,cc._RF.pop()},{"./AnimValue":"AnimValue"}],AnimValueProgressHP:[function(t,e,i){"use strict";cc._RF.push(e,"c3afeSdbzBJDJZejppXH98u","AnimValueProgressHP");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./AnimValueProgress"),s=cc._decorator,c=s.ccclass,l=s.property,u=s.menu,p=s.requireComponent,h=s.executeInEditMode,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.barShadow=null,e}return o(e,t),e.prototype.setBarShadow=function(t){switch(this.progressBar.mode){case cc.ProgressBar.Mode.HORIZONTAL:this.barShadow.node.width=this.progressBar.totalLength*t;break;case cc.ProgressBar.Mode.VERTICAL:this.barShadow.node.height=this.progressBar.totalLength*t;break;case cc.ProgressBar.Mode.FILLED:this.barShadow.fillRange=t}},e.prototype.onAnimStart=function(){this.isAdd||(this.progressBar.progress=this.endValue)},e.prototype.onAnimUpdate=function(){this.isAdd?(this.setBarShadow(this.curValue),this.progressBar.progress=this.curValue):this.setBarShadow(this.curValue)},r([l({type:cc.Sprite,tooltip:!1})],e.prototype,"barShadow",void 0),r([c,h,p(cc.ProgressBar),u("Framework/UI\u7ec4\u4ef6/AnimValueProgressHP")],e)}(a.default);i.default=f,cc._RF.pop()},{"./AnimValueProgress":"AnimValueProgress"}],AnimValueProgress:[function(t,e,i){"use strict";cc._RF.push(e,"7f95cXxJPhAJaQaqRBZkHaC","AnimValueProgress");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./AnimValue"),s=cc._decorator,c=s.ccclass,l=(s.property,s.menu),u=s.requireComponent,p=s.executeInEditMode,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._progressBar=null,e}return o(e,t),Object.defineProperty(e.prototype,"progressBar",{get:function(){return this._progressBar||(this._progressBar=this.getComponent(cc.ProgressBar)),this._progressBar},enumerable:!1,configurable:!0}),e.prototype.onAnimUpdate=function(){this.progressBar.progress=this.curValue},r([c,p,u(cc.ProgressBar),l("Framework/UI\u7ec4\u4ef6/AnimValueProgress")],e)}(a.default);i.default=h,cc._RF.pop()},{"./AnimValue":"AnimValue"}],AnimValue:[function(t,e,i){"use strict";cc._RF.push(e,"cfe49J1R7JHxIqVge927Yqj","AnimValue");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a,s,c=t("../../../util/Tween"),l=cc._decorator,u=l.ccclass,p=l.property,h=l.menu,f=l.executeInEditMode;(function(t){t[t.SPEED=0]="SPEED",t[t.DURATION=1]="DURATION"})(a||(a={})),function(t){t[t.NONE=0]="NONE",t[t.IN=1]="IN",t[t.OUT=2]="OUT",t[t.IN_OUT=3]="IN_OUT"}(s||(s={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._endValue=0,e._curValue=0,e.animType=a.SPEED,e.speed=1,e.duration=1,e.easingType=s.NONE,e.timeScale=!1,e._tween=null,e._isAdd=!1,e}return o(e,t),Object.defineProperty(e.prototype,"initValue",{get:function(){return this._endValue},set:function(t){this._curValue=t,this._endValue=t,this.setValueImmediately(this._endValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAdd",{get:function(){return this._isAdd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endValue",{get:function(){return this._endValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curValue",{get:function(){return this._curValue},enumerable:!1,configurable:!0}),e.prototype.onAnimStart=function(){},e.prototype.onAnimUpdate=function(){},e.prototype.onAnimComplete=function(){this._animResolve&&(this._animResolve(),this._animResolve=null),this._tween&&(this._tween.stop(),this._tween=null)},e.prototype.setValueImmediately=function(t){this._isAdd=this._endValue-this._curValue>0,this._endValue=t,this._curValue=t,this.onAnimStart(),this.onAnimUpdate(),this.onAnimComplete()},e.prototype.setValue=function(t,e){var i=this;return void 0===e&&(e=!0),new Promise(function(n){var o;if(!e)return i.setValueImmediately(t),void n();i._animResolve=n,i._endValue=t,i._isAdd=i._endValue-i._curValue>0,null===(o=i._tween)||void 0===o||o.stop(),i._tween=i.timeScale?new c.Tween(i,c.SCALE_TWEEN):new c.Tween(i);var r=i.animType===a.DURATION?i.duration:Math.abs(i._endValue-i._curValue)/i.speed;switch(i.easingType){case s.IN:i._tween.easing(c.Easing.Quadratic.In);break;case s.OUT:i._tween.easing(c.Easing.Quadratic.Out);break;case s.IN_OUT:i._tween.easing(c.Easing.Quadratic.InOut)}i._tween.to({_curValue:i._endValue},1e3*r).onStart(function(){i.onAnimStart()}).onUpdate(function(){i.onAnimUpdate()}).onComplete(function(){i.onAnimComplete()}).start()})},e.prototype.stop=function(){this._animResolve&&(this._animResolve=null),this._tween&&(this._tween.stop(),this._tween=null)},r([p],e.prototype,"_endValue",void 0),r([p],e.prototype,"_curValue",void 0),r([p({tooltip:!1})],e.prototype,"initValue",null),r([p({type:cc.Enum(a),tooltip:!1})],e.prototype,"animType",void 0),r([p({tooltip:!1,visible:function(){return this.animType===a.SPEED}})],e.prototype,"speed",void 0),r([p({tooltip:!1,visible:function(){return this.animType===a.DURATION}})],e.prototype,"duration",void 0),r([p({type:cc.Enum(s),tooltip:!1})],e.prototype,"easingType",void 0),r([p({tooltip:!1})],e.prototype,"timeScale",void 0),r([u,f,h("Framework/UI\u7ec4\u4ef6/AnimValue")],e)}(cc.Component);i.default=d,cc._RF.pop()},{"../../../util/Tween":"Tween"}],AnimatorAnimation:[function(t,e,i){"use strict";cc._RF.push(e,"ddcbcHQdPFOfY+mAxuSRJ7E","AnimatorAnimation");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./core/AnimatorBase"),s=cc._decorator,c=s.ccclass,l=(s.property,s.requireComponent),u=s.disallowMultiple,p=s.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._animation=null,e._animState=null,e._wrapModeMap=new Map,e}return o(e,t),e.prototype.start=function(){this.playOnStart&&!this._hasInit&&(this._hasInit=!0,this._animation=this.getComponent(cc.Animation),this._animation.on(cc.Animation.EventType.FINISHED,this.onAnimFinished,this),this._animation.on(cc.Animation.EventType.LASTFRAME,this.onAnimFinished,this),null!==this.assetRawUrl&&this.initJson(this.assetRawUrl.json))},e.prototype.onInit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.playOnStart||this._hasInit||(this._hasInit=!0,this.initArgs.apply(this,t),this._animation=this.getComponent(cc.Animation),this._animation.on(cc.Animation.EventType.FINISHED,this.onAnimFinished,this),this._animation.on(cc.Animation.EventType.LASTFRAME,this.onAnimFinished,this),null!==this.assetRawUrl&&this.initJson(this.assetRawUrl.json))},e.prototype.playAnimation=function(t,e){t&&(this._animState=this._animation.play(t),this._animState&&(this._wrapModeMap.has(this._animState)||this._wrapModeMap.set(this._animState,this._animState.wrapMode),this._animState.wrapMode=e?cc.WrapMode.Loop:this._wrapModeMap.get(this._animState)))},e.prototype.scaleTime=function(t){this._animState&&(this._animState.speed=t)},r([c,u,l(cc.Animation),p("Framework/Animator/AnimatorAnimation")],e)}(a.default);i.default=h,cc._RF.pop()},{"./core/AnimatorBase":"AnimatorBase"}],AnimatorBase:[function(t,e,i){"use strict";cc._RF.push(e,"33dabcEWT5IlqYLTD/ozvjl","AnimatorBase");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./AnimatorController"),s=cc._decorator,c=s.ccclass,l=s.property,u=s.executionOrder,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.assetRawUrl=null,e.playOnStart=!0,e.autoUpdate=!0,e._hasInit=!1,e._ac=null,e._stateLogicMap=null,e._onStateChangeCall=null,e._animationPlayer=null,e._extraMulti=1,e}return o(e,t),Object.defineProperty(e.prototype,"extraMulti",{get:function(){return this._extraMulti},set:function(t){this._extraMulti!==t&&(this._extraMulti=t,this.updatePlaySpeed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curStateName",{get:function(){return this._ac.curState.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curStateMotion",{get:function(){return this._ac.curState.motion},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animComplete",{get:function(){return this._ac.animComplete},enumerable:!1,configurable:!0}),e.prototype.onInit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.initArgs=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e.forEach(function(e){e&&("function"==typeof e?t._onStateChangeCall=e:"object"==typeof e&&(e instanceof Map?t._stateLogicMap=e:(t._animationPlayer=e,t._animationPlayer.setFinishedCallback(t.onAnimFinished,t))))})},e.prototype.updatePlaySpeed=function(){var t=this._ac.curState.speed*this.extraMulti;this._ac.curState.multi&&(t*=this._ac.params.getNumber(this._ac.curState.multi)||1),this.scaleTime(t)},e.prototype.updateAnimator=function(){if(this.updatePlaySpeed(),this._stateLogicMap){var t=this._stateLogicMap.get(this._ac.curState.name);t&&t.onUpdate()}this._ac.updateAnimator()},e.prototype.update=function(){this._hasInit&&this.autoUpdate&&this.updateAnimator()},e.prototype.manualUpdate=function(){this._hasInit&&!this.autoUpdate&&this.updateAnimator()},e.prototype.initJson=function(t){this._ac=new a.default(this,t),this._ac.changeState(t.defaultState)},e.prototype.onAnimFinished=function(){this._ac.onAnimationComplete()},e.prototype.playAnimation=function(){},e.prototype.scaleTime=function(){},e.prototype.onStateChange=function(t,e){this.playAnimation(e.motion,e.loop);var i=t?t.name:"";if(this._stateLogicMap){var n=this._stateLogicMap.get(i);n&&n.onExit();var o=this._stateLogicMap.get(e.name);o&&o.onEntry()}this._onStateChangeCall&&this._onStateChangeCall(i,e.name)},e.prototype.setBool=function(t,e){this._ac.params.setBool(t,e)},e.prototype.getBool=function(t){return 0!==this._ac.params.getBool(t)},e.prototype.setNumber=function(t,e){this._ac.params.setNumber(t,e)},e.prototype.getNumber=function(t){return this._ac.params.getNumber(t)},e.prototype.setTrigger=function(t){this._ac.params.setTrigger(t)},e.prototype.resetTrigger=function(t){this._ac.params.resetTrigger(t)},e.prototype.autoTrigger=function(t){this._ac.params.autoTrigger(t)},e.prototype.play=function(t){this._hasInit&&this._ac.play(t)},r([l({type:cc.JsonAsset,tooltip:!1})],e.prototype,"assetRawUrl",void 0),r([l({tooltip:!1})],e.prototype,"playOnStart",void 0),r([l({tooltip:!1})],e.prototype,"autoUpdate",void 0),r([c,u(-1e3)],e)}(cc.Component);i.default=p,cc._RF.pop()},{"./AnimatorController":"AnimatorController"}],AnimatorCondition:[function(t,e,i){"use strict";var n,o;cc._RF.push(e,"dee7b/HNztHyqFZucFEjW8S","AnimatorCondition"),Object.defineProperty(i,"__esModule",{value:!0}),i.LogicType=i.ParamType=void 0,function(t){t[t.COMPLETE=0]="COMPLETE",t[t.BOOLEAN=1]="BOOLEAN",t[t.NUMBER=2]="NUMBER",t[t.TRIGGER=3]="TRIGGER",t[t.AUTO_TRIGGER=4]="AUTO_TRIGGER"}(n=i.ParamType||(i.ParamType={})),function(t){t[t.EQUAL=0]="EQUAL",t[t.NOTEQUAL=1]="NOTEQUAL",t[t.GREATER=2]="GREATER",t[t.LESS=3]="LESS",t[t.GREATER_EQUAL=4]="GREATER_EQUAL",t[t.LESS_EQUAL=5]="LESS_EQUAL"}(o=i.LogicType||(i.LogicType={}));var r=function(){function t(t,e){this._ac=null,this._param="",this._value=0,this._logic=o.EQUAL,this._ac=e,this._param=t.param,this._value=t.value,this._logic=t.logic}return t.prototype.getParamName=function(){return this._param},t.prototype.getParamType=function(){return this._ac.params.getParamType(this._param)},t.prototype.check=function(){var t=this.getParamType();if(t===n.BOOLEAN)return this._ac.params.getBool(this._param)===this._value;if(t!==n.NUMBER)return t===n.AUTO_TRIGGER?0!==this._ac.params.getAutoTrigger(this._param):t===n.TRIGGER?0!==this._ac.params.getTrigger(this._param):(cc.error("[AnimatorCondition.check] \u9519\u8bef\u7684type: "+t),!1);var e=this._ac.params.getNumber(this._param);switch(this._logic){case o.EQUAL:return e===this._value;case o.NOTEQUAL:return e!==this._value;case o.GREATER:return e>this._value;case o.LESS:return e<this._value;case o.GREATER_EQUAL:return e>=this._value;case o.LESS_EQUAL:return e<=this._value;default:return!1}},t}();i.default=r,cc._RF.pop()},{}],AnimatorController:[function(t,e,i){"use strict";cc._RF.push(e,"de785Aa4lpFH59CMCV1Eb74","AnimatorController"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./AnimatorParams"),o=t("./AnimatorState"),r=function(){function t(t,e){this._jsonData=null,this._animator=null,this._params=null,this._states=null,this._anyState=null,this._curState=null,this._changeCount=0,this.animCompleteState=null,this.animComplete=!1,this._animator=t,this._jsonData=e,this._states=new Map,this._params=new n.default(e.parameters),this.init(e)}return Object.defineProperty(t.prototype,"curState",{get:function(){return this._curState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!1,configurable:!0}),t.prototype.init=function(t){if(t.states.length<=0)cc.error("[AnimatorController.init] \u72b6\u6001\u673ajson\u9519\u8bef");else{this._anyState=new o.default(t.anyState,this);for(var e=0;e<t.states.length;e++){var i=new o.default(t.states[e],this);this._states.set(i.name,i)}}},t.prototype.updateState=function(){this._curState.checkAndTrans(),this._curState!==this._anyState&&null!==this._anyState&&this._anyState.checkAndTrans()},t.prototype.updateAnimator=function(){this._changeCount=0,this.updateState(),this.animComplete&&this.animCompleteState.loop&&(this.animComplete=!1),this.params.resetAllAutoTrigger()},t.prototype.onAnimationComplete=function(){this.animComplete=!0,this.animCompleteState=this._curState},t.prototype.play=function(t){if(this._states.has(t)){this.animComplete=!1;var e=this._curState;this._curState=this._states.get(t),this._animator.onStateChange(e,this._curState),this.updateState()}},t.prototype.changeState=function(t){if(this._changeCount++,this._changeCount>1e3)cc.error("[AnimatorController.changeState] error: \u72b6\u6001\u5207\u6362\u9012\u5f52\u8c03\u7528\u8d85\u8fc71000\u6b21\uff0ctransition\u8bbe\u7f6e\u53ef\u80fd\u51fa\u9519!");else if(!this._states.has(t)||null!==this._curState&&this._curState.name===t)cc.error("[AnimatorController.changeState] error state: "+t);else{var e=this._curState;this._curState=this._states.get(t),this._animator.onStateChange(e,this._curState),this.updateState()}},t}();i.default=r,cc._RF.pop()},{"./AnimatorParams":"AnimatorParams","./AnimatorState":"AnimatorState"}],AnimatorCustomization:[function(t,e,i){"use strict";cc._RF.push(e,"32e01QIrwtP4buKMSAxTJmr","AnimatorCustomization");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./core/AnimatorBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=(s.requireComponent,s.disallowMultiple),p=s.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playOnStart=!1,e}return o(e,t),e.prototype.onInit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._hasInit||(this._hasInit=!0,this.initArgs.apply(this,t),null!==this.assetRawUrl&&this.initJson(this.assetRawUrl.json))},e.prototype.playAnimation=function(t,e){this._animationPlayer&&t&&this._animationPlayer.playAnimation(t,e)},e.prototype.scaleTime=function(t){this._animationPlayer&&this._animationPlayer.scaleTime(t)},r([l({override:!0,visible:!1})],e.prototype,"playOnStart",void 0),r([c,u,p("Framework/Animator/AnimatorCustomization")],e)}(a.default);i.default=h,cc._RF.pop()},{"./core/AnimatorBase":"AnimatorBase"}],AnimatorParams:[function(t,e,i){"use strict";cc._RF.push(e,"47250iiE8tKUZF6tjFUlfMo","AnimatorParams"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./AnimatorCondition"),o=function(){function t(t){var e=this;this._paramMap=new Map,t.forEach(function(t){var i={type:t.type,value:t.init};e._paramMap.set(t.param,i)})}return t.prototype.getParamType=function(t){var e=this._paramMap.get(t);return e?e.type:null},t.prototype.setNumber=function(t,e){var i=this._paramMap.get(t);i&&i.type===n.ParamType.NUMBER&&(i.value=e)},t.prototype.setBool=function(t,e){var i=this._paramMap.get(t);i&&i.type===n.ParamType.BOOLEAN&&(i.value=e?1:0)},t.prototype.setTrigger=function(t){var e=this._paramMap.get(t);e&&e.type===n.ParamType.TRIGGER&&(e.value=1)},t.prototype.resetTrigger=function(t){var e=this._paramMap.get(t);e&&e.type===n.ParamType.TRIGGER&&(e.value=0)},t.prototype.autoTrigger=function(t){var e=this._paramMap.get(t);e&&e.type===n.ParamType.AUTO_TRIGGER&&(e.value=1)},t.prototype.resetAutoTrigger=function(t){var e=this._paramMap.get(t);e&&e.type===n.ParamType.AUTO_TRIGGER&&(e.value=0)},t.prototype.resetAllAutoTrigger=function(){this._paramMap.forEach(function(t){t.type===n.ParamType.AUTO_TRIGGER&&(t.value=0)})},t.prototype.getNumber=function(t){var e=this._paramMap.get(t);return e&&e.type===n.ParamType.NUMBER?e.value:0},t.prototype.getBool=function(t){var e=this._paramMap.get(t);return e&&e.type===n.ParamType.BOOLEAN?e.value:0},t.prototype.getTrigger=function(t){var e=this._paramMap.get(t);return e&&e.type===n.ParamType.TRIGGER?e.value:0},t.prototype.getAutoTrigger=function(t){var e=this._paramMap.get(t);return e&&e.type===n.ParamType.AUTO_TRIGGER?e.value:0},t}();i.default=o,cc._RF.pop()},{"./AnimatorCondition":"AnimatorCondition"}],AnimatorStateLogic:[function(t,e,i){"use strict";cc._RF.push(e,"67f80RtpchPbbZr6OYBU8NI","AnimatorStateLogic"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.onEntry=function(){},t.prototype.onUpdate=function(){},t.prototype.onExit=function(){},t}();i.default=n,cc._RF.pop()},{}],AnimatorState:[function(t,e,i){"use strict";cc._RF.push(e,"c1d25xIgn5M3ZaxWIV1n5ii","AnimatorState"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./AnimatorTransition"),o=function(){function t(t,e){this._name="",this._motion="",this._loop=!1,this._speed=1,this._multi="",this._transitions=[],this._ac=null,this._name=t.state,this._motion=t.motion||"",this._loop=t.loop||!1,this._speed=t.speed||1,this._multi=t.multiplier||"",this._ac=e;for(var i=0;i<t.transitions.length;i++){var o=new n.default(t.transitions[i],e);o.isValid()&&this._transitions.push(o)}}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"motion",{get:function(){return this._motion},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multi",{get:function(){return this._multi},enumerable:!1,configurable:!0}),t.prototype.checkAndTrans=function(){for(var t=0;t<this._transitions.length;t++){var e=this._transitions[t];if(e&&e.check())return void e.doTrans()}},t}();i.default=o,cc._RF.pop()},{"./AnimatorTransition":"AnimatorTransition"}],AnimatorTransition:[function(t,e,i){"use strict";cc._RF.push(e,"34b08BDtkZDiLlsqDHQh7XT","AnimatorTransition"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./AnimatorCondition"),o=function(){function t(t,e){this._toStateName="",this._hasExitTime=!1,this._conditions=[],this._ac=null,this._toStateName=t.toState,this._hasExitTime=t.hasExitTime,this._ac=e;for(var i=0;i<t.conditions.length;i++){var o=new n.default(t.conditions[i],e);this._conditions.push(o)}}return t.prototype.isValid=function(){return this._hasExitTime||this._conditions.length>0},t.prototype.check=function(){if(this._toStateName===this._ac.curState.name)return!1;if(this._hasExitTime&&(this._ac.curState!==this._ac.animCompleteState||!this._ac.animComplete))return!1;for(var t=0;t<this._conditions.length;t++)if(!this._conditions[t].check())return!1;return!0},t.prototype.doTrans=function(){this._hasExitTime&&(this._ac.animComplete=!1);for(var t=0;t<this._conditions.length;t++){var e=this._conditions[t].getParamType(),i=this._conditions[t].getParamName();e===n.ParamType.TRIGGER?this._ac.params.resetTrigger(i):e===n.ParamType.AUTO_TRIGGER&&this._ac.params.resetAutoTrigger(i)}this._ac.changeState(this._toStateName)},t}();i.default=o,cc._RF.pop()},{"./AnimatorCondition":"AnimatorCondition"}],AudioManager:[function(t,e,i){"use strict";cc._RF.push(e,"ed9cbEOGDVGSIJOKhzlTwEi","AudioManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.SfxType=void 0;var n,o=t("./Tween");(function(t){t[t.NORMAL=0]="NORMAL",t[t.UI=1]="UI"})(n=i.SfxType||(i.SfxType={}));var r=function(){function t(){}return Object.defineProperty(t,"bgmVolume",{get:function(){return this._bgmVolume},set:function(t){var e=this;this._bgmVolume!==t&&(this._bgmVolume=cc.misc.clampf(t,0,1),this._bgmMap.forEach(function(t){cc.audioEngine.setVolume(t.id,e._bgmVolume*t.volume)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"sfxVolume",{get:function(){return this._sfxVolume},set:function(t){var e=this;this._sfxVolume!==t&&(this._sfxVolume=cc.misc.clampf(t,0,1),this._normalSfxMap.forEach(function(t){t.audioList.forEach(function(t){cc.audioEngine.setVolume(t.id,e._sfxVolume*t.volume)})}),this._uiSfxMap.forEach(function(t){t.audioList.forEach(function(t){cc.audioEngine.setVolume(t.id,e._sfxVolume*t.volume)})}))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"bgmOff",{get:function(){return this._bgmOff},set:function(t){var e=this;this._bgmOff!==t&&(this._bgmOff=t,this._bgmOff&&(this._bgmMap.forEach(function(t){e.stop(t)}),this._bgmMap.clear()))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"sfxOff",{get:function(){return this._sfxOff},set:function(t){var e=this;this._sfxOff!==t&&(this._sfxOff=t,this._sfxOff&&(this._normalSfxMap.forEach(function(t){t.audioList.forEach(function(t){e.stop(t)}),t.audioList.length=0}),this._uiSfxMap.forEach(function(t){t.audioList.forEach(function(t){e.stop(t)}),t.audioList.length=0})))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"bgmPause",{get:function(){return this._bgmPause},set:function(t){var e=this;this.bgmOff||this._bgmPause===t||(this._bgmPause=t,this._bgmMap.forEach(function(t){var i,n;e._bgmPause?(null===(i=t.tween)||void 0===i||i.pause(),cc.audioEngine.pause(t.id)):(null===(n=t.tween)||void 0===n||n.resume(),cc.audioEngine.resume(t.id))}))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"sfxPause",{get:function(){return this._sfxPause},set:function(t){this.sfxOff||this._sfxPause===t||(this._sfxPause=t,this._sfxPause?this._normalSfxMap.forEach(function(t){t.audioList.forEach(function(t){var e;null===(e=t.tween)||void 0===e||e.pause(),cc.audioEngine.pause(t.id)})}):this._normalSfxMap.forEach(function(t){t.audioList.forEach(function(t){var e;null===(e=t.tween)||void 0===e||e.resume(),cc.audioEngine.resume(t.id)})}))},enumerable:!1,configurable:!0}),t.volumeFade=function(t,e,i,n,r){var a,s=this;null===(a=t.tween)||void 0===a||a.stop(),t.volume=i,cc.audioEngine.setVolume(t.id,t.volume*this.bgmVolume),t.tween=new o.Tween(t).to({volume:n},1e3*e).onUpdate(function(){cc.audioEngine.setVolume(t.id,t.volume*s.bgmVolume)}).onComplete(function(){t.tween=null,r&&r()}).start()},t.stop=function(t){t.tween&&(t.tween.stop(),t.tween=null),cc.audioEngine.stop(t.id)},t.play=function(t,e,i){void 0===i&&(i=null);var n=t instanceof cc.AudioClip?{clip:t}:t;return n.hasOwnProperty("loop")||(n.loop=!1),n.hasOwnProperty("fadeDuration")||(n.fadeDuration=0),n.hasOwnProperty("finishCall")||(n.finishCall=null),i?(i.id=cc.audioEngine.play(n.clip,n.loop,e),i.volume=1,i.tween&&(i.tween.stop(),i.tween=null)):i={id:cc.audioEngine.play(n.clip,n.loop,e),volume:1,tween:null},n.finishCall&&cc.audioEngine.setFinishCallback(i.id,n.finishCall),n.fadeDuration>0&&this.volumeFade(i,n.fadeDuration,0,1),i},t.playBgm=function(t){var e=t instanceof cc.AudioClip?t:t.clip;if(!this.bgmOff&&e){var i=this._bgmMap.get(e);void 0===i?(i=this.play(t,this.bgmVolume),this._bgmMap.set(e,i)):(this.stop(i),this.play(t,this.bgmVolume,i))}},t.playSfx=function(t,e){void 0===e&&(e=n.NORMAL);var i=t instanceof cc.AudioClip?t:t.clip;if(!this.sfxOff&&i){var o=e===n.NORMAL?this._normalSfxMap.get(i):this._uiSfxMap.get(i),r=null;if(void 0===o)o=this.setSfxData(i,e),r=this.play(t,this.sfxVolume),o.audioList.push(r);else{for(;o.audioList.length>0&&cc.audioEngine.getState(o.audioList[0].id)!==cc.audioEngine.AudioState.PLAYING;)this.stop(o.audioList.shift());for(;o.overStop&&o.audioList.length>=o.maxNum;)this.stop(o.audioList.shift());o.audioList.length<o.maxNum&&(r=this.play(t,this.sfxVolume),o.audioList.push(r))}}},t.setSfxData=function(t,e,i,o){if(void 0===e&&(e=n.NORMAL),void 0===i&&(i=8),void 0===o&&(o=!1),t){i=Math.max(i,1);var r=e===n.NORMAL?this._normalSfxMap:this._uiSfxMap,a=r.get(t);return void 0===a?(a={audioList:[],maxNum:i,overStop:o},r.set(t,a)):(a.maxNum=i,a.overStop=o),a}},t.stopBgm=function(t,e){var i=this;if(void 0===t&&(t=null),void 0===e&&(e=0),!this.bgmOff)if(t){var n=this._bgmMap.get(t);if(void 0===n)return;e<=0?(this.stop(n),this._bgmMap.delete(t)):this.volumeFade(n,e,1,0,function(){i.stop(n),i._bgmMap.delete(t)})}else e<=0?(this._bgmMap.forEach(function(t){i.stop(t)}),this._bgmMap.clear()):this._bgmMap.forEach(function(t,n){i.volumeFade(t,e,1,0,function(){i.stop(t),i._bgmMap.delete(n)})})},t.stopSfx=function(t,e){var i=this;if(void 0===t&&(t=null),void 0===e&&(e=n.NORMAL),!this.sfxOff)if(t){var o=e===n.NORMAL?this._normalSfxMap.get(t):this._uiSfxMap.get(t);if(void 0===o||o.audioList.length<=0)return;o.audioList.forEach(function(t){i.stop(t)}),o.audioList.length=0}else this._normalSfxMap.forEach(function(t){t.audioList.forEach(function(t){i.stop(t)}),t.audioList.length=0}),this._uiSfxMap.forEach(function(t){t.audioList.forEach(function(t){i.stop(t)}),t.audioList.length=0})},t.stopAll=function(){this.stopBgm(),this.stopSfx()},t.pauseAll=function(){this.bgmPause=!0,this.sfxPause=!0},t.resumeAll=function(){this.bgmPause=!1,this.sfxPause=!1},t.uncacheAll=function(){this.stopAll(),this._bgmMap.clear(),this._normalSfxMap.clear(),this._uiSfxMap.clear(),cc.audioEngine.uncacheAll()},t._bgmMap=new Map,t._normalSfxMap=new Map,t._uiSfxMap=new Map,t._bgmVolume=1,t._sfxVolume=1,t._bgmOff=!1,t._sfxOff=!1,t._bgmPause=!1,t._sfxPause=!1,t}();i.default=r,cc._RF.pop()},{"./Tween":"Tween"}],BuildsInfo:[function(t,e,i){"use strict";cc._RF.push(e,"22bb3AKTNFIfpg7iTgYY76i","BuildsInfo"),Object.defineProperty(i,"__esModule",{value:!0}),i.BuildsInfo=void 0;var n=t("./Data");i.BuildsInfo=function(t){this.level=t;var e=n.Data.install.getBuildsInfo(t);this.img=e.img,this.incomeCoin=e.incomeCoin,this.incomeRoll=e.incomeRoll,this.name=e.name,this.text=e.text,this.shop=e.shop,this.addShop=e.addShop,this.maxShop=e.maxShop,this.sale=e.sale,this.additionCoin=e.additionCoin,this.additionRoll=e.additionRoll,this.roll=e.roll,this.money=e.money},cc._RF.pop()},{"./Data":"Data"}],BuildsItem:[function(t,e,i){"use strict";cc._RF.push(e,"5a716I62dVMNYnBpsiXMw+z","BuildsItem");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../common/util/Res"),s=t("./BuildsInfo"),c=t("./GameMgr"),l=cc._decorator,u=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.tip=null,e.info=null,e._move=!1,e}return o(e,t),e.prototype.onLoad=function(){this.tip.opacity=0,this._dePos=this.node.getPosition()},e.prototype.init=function(t,e){var i=this;this.posIndex=t,this.level=e,this.info=new s.BuildsInfo(e),this.tip.getComponentInChildren(cc.Label).string="+"+5*this.info.incomeCoin,a.default.load("builds/"+this.info.img,cc.SpriteFrame).then(function(t){i.icon.spriteFrame=t}),this.startAnim()},e.prototype.startAnim=function(){this.schedule(this.play,5)},e.prototype.stopAnim=function(){this.unschedule(this.play)},e.prototype.play=function(){this._move||(cc.tween(this.icon.node).to(.2,{scaleY:.9}).to(.2,{scaleY:1.15}).to(.1,{scaleY:.98}).to(.05,{scaleY:1}).start(),this.showTip())},e.prototype.showTip=function(){this.tip.y=20,this.tip.opacity=160,cc.tween(this.tip).to(.5,{y:40,opacity:255}).delay(.5).to(1,{y:80,opacity:0}).start()},e.prototype.sale=function(){c.default.install.coin+=this.info.sale},r([p(cc.Sprite)],e.prototype,"icon",void 0),r([p(cc.Node)],e.prototype,"tip",void 0),r([u],e)}(cc.Component);i.default=h,cc._RF.pop()},{"../common/util/Res":"Res","./BuildsInfo":"BuildsInfo","./GameMgr":"GameMgr"}],ButtonChildGray:[function(t,e,i){"use strict";cc._RF.push(e,"19687AwHRhAjoLcsGZTr1YH","ButtonChildGray");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../../hack/ButtonHack"),s=t("../../../util/Tool"),c=cc._decorator,l=c.ccclass,u=c.property,p=c.menu,h=c.requireComponent,f=c.executeInEditMode,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.relatedNodes=[],e.normalMaterial=null,e.grayMaterial=null,e}return o(e,t),e.prototype.onLoad=function(){this.node.on(a.ButtonHackEvent.STATE_CHANGE,this.onStateChange,this)},e.prototype.onStateChange=function(t){var e=this;if(t===a.ButtonState.DISABLED){this.grayMaterial||(this.grayMaterial=cc.Material.getBuiltinMaterial("2d-gray-sprite"));var i=function(t){var i=t.getComponent(cc.RenderComponent);i&&(i instanceof cc.Sprite||i instanceof cc.Label)&&i.setMaterial(0,e.grayMaterial)};s.default.nodeRecursive(this.node.children,i),s.default.nodeRecursive(this.relatedNodes,i)}else this.normalMaterial||(this.normalMaterial=cc.Material.getBuiltinMaterial("2d-sprite")),i=function(t){var i=t.getComponent(cc.RenderComponent);i&&(i instanceof cc.Sprite||i instanceof cc.Label)&&i.setMaterial(0,e.normalMaterial)},s.default.nodeRecursive(this.node.children,i),s.default.nodeRecursive(this.relatedNodes,i)},r([u({type:cc.Node,tooltip:!1})],e.prototype,"relatedNodes",void 0),r([u(cc.Material)],e.prototype,"normalMaterial",void 0),r([u(cc.Material)],e.prototype,"grayMaterial",void 0),r([l,f,h(cc.Button),p("Framework/UI\u7ec4\u4ef6/ButtonChildGray")],e)}(cc.Component);i.default=d,cc._RF.pop()},{"../../../hack/ButtonHack":"ButtonHack","../../../util/Tool":"Tool"}],ButtonChildPos:[function(t,e,i){"use strict";cc._RF.push(e,"1c34dZFfsxBlZKPpElUos3w","ButtonChildPos");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../../hack/ButtonHack"),s=cc._decorator,c=s.ccclass,l=s.property,u=s.menu,p=s.requireComponent,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.normal=cc.v2(0,0),e.pressed=cc.v2(0,0),e.hover=cc.v2(0,0),e.disabled=cc.v2(0,0),e}return o(e,t),e.prototype.onLoad=function(){this.node.on(a.ButtonHackEvent.STATE_CHANGE,this.onStateChange,this)},e.prototype.onStateChange=function(t){var e=cc.v2(0,0);switch(t){case a.ButtonState.NORMAL:e=this.normal;break;case a.ButtonState.PRESSED:e=this.pressed;break;case a.ButtonState.HOVER:e=this.hover;break;case a.ButtonState.DISABLED:e=this.disabled}this.node.children.forEach(function(t){t.setPosition(e)})},r([l({tooltip:!1})],e.prototype,"normal",void 0),r([l({tooltip:!1})],e.prototype,"pressed",void 0),r([l({tooltip:!1})],e.prototype,"hover",void 0),r([l({tooltip:!1})],e.prototype,"disabled",void 0),r([c,p(cc.Button),u("Framework/UI\u7ec4\u4ef6/ButtonChildPos")],e)}(cc.Component);i.default=h,cc._RF.pop()},{"../../../hack/ButtonHack":"ButtonHack"}],ButtonHack:[function(t,e,i){"use strict";var n;cc._RF.push(e,"2aaa36JkjVLWItbzIIr6kKk","ButtonHack"),Object.defineProperty(i,"__esModule",{value:!0}),i.ButtonState=i.ButtonHackEvent=void 0,function(t){t.STATE_CHANGE="ButtonHackEvent-STATE_CHANGE"}(n=i.ButtonHackEvent||(i.ButtonHackEvent={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.HOVER=1]="HOVER",t[t.PRESSED=2]="PRESSED",t[t.DISABLED=3]="DISABLED"}(i.ButtonState||(i.ButtonState={})),cc.Button.prototype._applyTransition=function(t){var e=this.transition;e===cc.Button.Transition.COLOR?this._updateColorTransition(t):e===cc.Button.Transition.SPRITE?this._updateSpriteTransition(t):e===cc.Button.Transition.SCALE&&this._updateScaleTransition(t),this.node.emit(n.STATE_CHANGE,t)},cc._RF.pop()},{}],ButtonSingle:[function(t,e,i){"use strict";cc._RF.push(e,"0dd4fIEsu5H8YHrLixEwxNu","ButtonSingle");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a,s=cc._decorator,c=s.ccclass,l=s.property,u=s.menu,p=s.requireComponent;(function(t){t[t.DEFAULT=0]="DEFAULT",t[t.GROUP1=1]="GROUP1",t[t.GROUP2=2]="GROUP2"})(a||(a={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttonGroup=a.DEFAULT,e._button=null,e}var i;return o(e,t),i=e,Object.defineProperty(e,"groupMap",{get:function(){return null===this._groupMap&&(this._groupMap=new Map),this._groupMap},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._button=this.getComponent(cc.Button);var t=i.groupMap.get(this.buttonGroup);void 0===t&&(t={lock:!1,buttonSet:new Set},i.groupMap.set(this.buttonGroup,t)),t.buttonSet.add(this._button),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.onDestroy=function(){var t=i.groupMap.get(this.buttonGroup);void 0!==t?(t.buttonSet.delete(this._button),this.unlock(t)):cc.error("[ButtonSingle.onDestroy] \u6570\u636e\u5f02\u5e38 ButtonGroup: "+this.buttonGroup)},e.prototype.onTouchStart=function(){var t=this,e=i.groupMap.get(this.buttonGroup);void 0!==e?e.lock||(e.lock=!0,e.buttonSet.forEach(function(e){e.enabled=e===t._button})):cc.error("[ButtonSingle.onTouchStart] \u6570\u636e\u5f02\u5e38 ButtonGroup: "+this.buttonGroup)},e.prototype.onTouchEnd=function(){var t=i.groupMap.get(this.buttonGroup);void 0!==t?this.unlock(t):cc.error("[ButtonSingle.onTouchEnd] \u6570\u636e\u5f02\u5e38 ButtonGroup: "+this.buttonGroup)},e.prototype.unlock=function(t){t.lock&&this._button.enabled&&(t.lock=!1,t.buttonSet.forEach(function(t){t.enabled=!0}))},e._groupMap=null,r([l({type:cc.Enum(a),tooltip:!1})],e.prototype,"buttonGroup",void 0),i=r([c,p(cc.Button),u("Framework/UI\u7ec4\u4ef6/ButtonSingle")],e)}(cc.Component);i.default=h,cc._RF.pop()},{}],CircleList:[function(t,e,i){"use strict";cc._RF.push(e,"b16a3Aay4tOsrajlZkk+6I1","CircleList");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../../util/Tool"),s=cc._decorator,c=s.ccclass,l=s.property,u=s.executeInEditMode,p=s.menu,h=270,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.ellipseAxes=cc.v2(0,0),e.scrollSpeed=200,e._init=!1,e._curDegree=h,e._targetDegree=h,e._scrolling=!1,e._itemDegreeMap=new Map,e._maxDelta=0,e._selectCall=null,e}return o(e,t),Object.defineProperty(e.prototype,"curDegree",{get:function(){return this._curDegree},set:function(t){this._curDegree=a.default.normalizeDegree(t),this.refreshItems()},enumerable:!1,configurable:!0}),e.prototype.init=function(t){var e=this;if(void 0===t&&(t=null),this._init=!0,this._scrolling=!1,this._maxDelta=0,this._itemDegreeMap.clear(),this._selectCall=t,!(this.content.childrenCount<=0)){var i=360/this.content.childrenCount;this.content.children.forEach(function(t,n){e._itemDegreeMap.set(t,n*i),t.on(cc.Node.EventType.TOUCH_MOVE,e.itemTouchMove,e),t.on(cc.Node.EventType.TOUCH_END,e.itemTouchEnd,e),t.on(cc.Node.EventType.TOUCH_CANCEL,e.itemTouchEnd,e)}),this.refreshItems()}},e.prototype.scrollToItem=function(t){var e;if(this._itemDegreeMap.has(t)){var i=this._itemDegreeMap.get(t),n=h-i;this._targetDegree=a.default.normalizeDegree(n),this._scrolling=!0,null===(e=this._selectCall)||void 0===e||e.call(this,t)}},e.prototype.refreshItems=function(){var t=this;this.content.children.forEach(function(e){var i=a.default.normalizeDegree(t._itemDegreeMap.get(e)+t.curDegree),n=a.default.getEllipsePoint(t.ellipseAxes.x,t.ellipseAxes.y,i);e.setPosition(n),e.zIndex=-e.y})},e.prototype.update=function(t){if(this._init&&this._scrolling&&this.curDegree!==this._targetDegree){var e=Math.abs(this._targetDegree-this.curDegree),i=this.curDegree,n=(e<180?1:-1)*Math.sign(this._targetDegree-this.curDegree);i+=t*this.scrollSpeed*n,(this.curDegree>this._targetDegree&&i<this._targetDegree||this.curDegree<this._targetDegree&&i>this._targetDegree)&&(i=this._targetDegree,this._scrolling=!1),this.curDegree=i}},e.prototype.itemTouchMove=function(t){var e=t.getDeltaX();Math.abs(e)<1||(this._maxDelta<Math.abs(e)&&(this._maxDelta=Math.abs(e)),this.curDegree=this.curDegree+e/5)},e.prototype.itemTouchEnd=function(t){var e=t.target;if(this._maxDelta<5)return this._maxDelta=0,void this.scrollToItem(e);for(var i=360,n=this.content.children[0],o=0;o<this.content.children.length;o++){var r=this.content.children[o],s=a.default.normalizeDegree(this._itemDegreeMap.get(r)+this.curDegree),c=Math.abs(h-s);c>180&&(c=s+360-h),c<i&&(i=c,n=r)}this._maxDelta=0,this.scrollToItem(n)},r([l(cc.Node)],e.prototype,"content",void 0),r([l({tooltip:!1})],e.prototype,"ellipseAxes",void 0),r([l({tooltip:!1})],e.prototype,"scrollSpeed",void 0),r([c,u,p("Framework/UI\u7ec4\u4ef6/CircleList")],e)}(cc.Component);i.default=f,cc._RF.pop()},{"../../../util/Tool":"Tool"}],CountdownLabel:[function(t,e,i){"use strict";cc._RF.push(e,"a125eaLZLVO+LQud2BLjWcd","CountdownLabel");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../util/Tool"),s=t("../../util/Tween"),c=cc._decorator,l=c.ccclass,u=c.property,p=c.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeScale=!1,e._tween=null,e._updateCall=null,e._completeCall=null,e._format="%{hh}:%{mm}:%{ss}",e._leftSec=0,e._leftFloorSec=0,e._label=null,e}return o(e,t),Object.defineProperty(e.prototype,"leftSec",{get:function(){return this._leftSec},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){var t;return this._label||(this._label=null!==(t=this.getComponent(cc.Label))&&void 0!==t?t:this.getComponent(cc.RichText)),this._label},enumerable:!1,configurable:!0}),e.prototype.startCountdown=function(t,e,i,n){var o,r=this;void 0===e&&(e="%{hh}:%{mm}:%{ss}"),void 0===i&&(i=null),void 0===n&&(n=null),this._leftSec=t,this._leftFloorSec=Math.floor(t),this._format=e,this._updateCall=i,this._completeCall=n,null===(o=this._tween)||void 0===o||o.stop(),this._tween=this.timeScale?new s.Tween(this,s.SCALE_TWEEN):new s.Tween(this),this._tween.to({_leftSec:0},1e3*t).onUpdate(function(){r.onUpdate()}).onComplete(function(){r.onComplete()}).start()},e.prototype.onUpdate=function(){var t,e=Math.floor(this._leftSec);e!==this._leftFloorSec&&(this._leftFloorSec=e,this.label&&(this.label.string=a.default.formatTimeString(this._leftFloorSec,this._format)),null===(t=this._updateCall)||void 0===t||t.call(this))},e.prototype.onComplete=function(){var t;null===(t=this._completeCall)||void 0===t||t.call(this)},r([u({tooltip:!1})],e.prototype,"timeScale",void 0),r([l,p("Framework/UI\u7ec4\u4ef6/CountdownLabel")],e)}(cc.Component);i.default=h,cc._RF.pop()},{"../../util/Tool":"Tool","../../util/Tween":"Tween"}],DataManager:[function(t,e,i){"use strict";cc._RF.push(e,"592db6AqLBDs7T6ml5Dz/4Z","DataManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.DataManager=void 0;var n=t("../game/BuildsInfo"),o=function(){function t(){this.buildsData=[],this.maxLevel=4,this.level=1,this.createLevel=1,this._BuildsInfoData=new Map,this.coinBuildsIncome=0,this.rollBuildsIncome=0,this.coinLevelIncome=0,this.rollLevelIncome=0}return Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.buildsData=[0,0,0,0,0,1,0,0,1,0,0,0]},t.prototype.getBuildsData=function(){return this.buildsData},t.prototype.getBuilds=function(t){return this.buildsData[t]||0},t.prototype.delBuilds=function(t){var e=this,i=[];"number"==typeof t?i.push(t):i=t,i.map(function(t){e.buildsData[t]=0}),this.countIncome()},t.prototype.setBuilds=function(t,e){this.buildsData[t]=e,this.countIncome(),this.upLevel(e)},t.prototype.getCreateIndex=function(){var t=-1;return this.buildsData.map(function(e,i){e||-1!=t||(t=i)}),t},t.prototype.exchangePosition=function(t,e){var i=this.getBuilds(t),n=this.getBuilds(e);this.buildsData[t]=n,this.buildsData[e]=i},t.prototype.upLevel=function(t){var e;this.level>=t||(this._BuildsInfoData.has(t)?e=this._BuildsInfoData.get(t):(e=new n.BuildsInfo(t),this._BuildsInfoData.set(t,e)),this.coinLevelIncome=e.additionCoin,this.rollLevelIncome=e.additionRoll)},t.prototype.countIncome=function(){var t=this,e=0,i=0;this.buildsData.map(function(o){if(0!=o){var r=void 0;t._BuildsInfoData.has(o)?r=t._BuildsInfoData.get(o):(r=new n.BuildsInfo(o),t._BuildsInfoData.set(o,r)),e+=r.incomeCoin,i+=r.incomeRoll}}),this.coinBuildsIncome=e,this.rollBuildsIncome=i},t.prototype.getBuildsNum=function(t){var e=0;return this.buildsData.map(function(i){t==i&&e++}),e},t}();i.DataManager=o,cc._RF.pop()},{"../game/BuildsInfo":"BuildsInfo"}],Data:[function(t,e,i){"use strict";cc._RF.push(e,"565a4nrWiZBuIPv4X6NYyAa","Data"),Object.defineProperty(i,"__esModule",{value:!0}),i.Data=void 0;var n=function(){function t(){this._buildsJson=[{id:1,level:1,img:"1",incomeCoin:6,incomeRoll:1,shop:10,addShop:5,maxShop:500,sale:1,additionCoin:1,additionRoll:1,name:"\u91cc\u7ea6\u70ed\u5185\u5362\u8036\u7a23\u50cf",roll:511,money:.1,text:"1\u7ea7\u5efa\u7b51"},{id:2,level:2,img:"2",incomeCoin:12,incomeRoll:2,shop:100,addShop:5,maxShop:800,sale:2,additionCoin:2,additionRoll:2,name:"\u5df4\u9ece\u57c3\u83f2\u5c14\u94c1\u5854",roll:550,money:.1,text:"2\u7ea7\u5efa\u7b51"},{id:3,level:3,img:"3",incomeCoin:25,incomeRoll:3,shop:500,addShop:10,maxShop:1200,sale:3,additionCoin:3,additionRoll:3,name:"\u57c3\u53ca\u91d1\u5b57\u5854",roll:620,money:.1,text:"3\u7ea7\u5efa\u7b51"},{id:4,level:4,img:"4",incomeCoin:52,incomeRoll:4,shop:1e3,addShop:20,maxShop:2e3,sale:4,additionCoin:4,additionRoll:4,name:"\u57c3\u53ca\u91d1\u5b57\u5854s",roll:710,money:.1,text:"4\u7ea7\u5efa\u7b51"}]}return Object.defineProperty(t,"install",{get:function(){return this._install||(this._install=new t),this._install},enumerable:!1,configurable:!0}),t.prototype.getBuildsInfo=function(t){var e=null;return this._buildsJson.map(function(i){i.level==t&&(e=i)}),e},t}();i.Data=n,cc._RF.pop()},{}],Decorator:[function(t,e,i){"use strict";cc._RF.push(e,"194e1Q1HWRNm4uMrCVIQinW","Decorator");var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var r=t("./Tool"),a=function(){function t(){}return t.queue=function(t,e,i){var r=i.value,a=new Map,s=function(){return n(this,void 0,Promise,function(){var t,e,i,n,c,l,u;return o(this,function(o){switch(o.label){case 0:if(void 0===(t=a.get(this)))return cc.error("[Decorator.queue] error: queue is undefined"),[2];if(0===t.length)return a.delete(this),[2];e=t[0],i=e[0],n=e[1],c=e[2],o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,r.apply(this,c)];case 2:return l=o.sent(),i(l),[3,5];case 3:return u=o.sent(),n(u),[3,5];case 4:return t.shift(),s.apply(this),[7];case 5:return[2]}})})};i.value=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return new Promise(function(i,n){var o=a.get(t);void 0===o&&(o=[],a.set(t,o)),o.push([i,n,e]),1===o.length&&s.apply(t)})}},t.lock=function(t){return void 0===t&&(t=0),function(e,i,n){var o=n.value,a=new Set;n.value=function(){for(var e=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];if(!a.has(this)){a.add(this);var s=o.apply(this,i);return s instanceof Promise?new Promise(function(i,n){s.then(function(n){r.default.wait(Math.max(t,0)).then(function(){a.delete(e)}),i(n)},function(i){r.default.wait(Math.max(t,0)).then(function(){a.delete(e)}),n(i)})}):(r.default.wait(Math.max(t,0)).then(function(){a.delete(e)}),s)}}}},t}();i.default=a,cc._RF.pop()},{"./Tool":"Tool"}],DialogBase:[function(t,e,i){"use strict";cc._RF.push(e,"9b83e2KZopKTb+TLQZNTspz","DialogBase");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0}),t("../../util/EditorTool");var a=t("../../util/Tool"),s=cc._decorator,c=s.ccclass,l=s.property,u=s.disallowMultiple,p=s.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dlgAnim=null,e.openClip=null,e.closeClip=null,e._resolveList=[],e._prefabUrl="",e}return o(e,t),Object.defineProperty(e.prototype,"prefabUrl",{get:function(){return this._prefabUrl},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.dlgAnim&&(this.openClip&&this.dlgAnim.addClip(this.openClip),this.closeClip&&this.dlgAnim.addClip(this.closeClip),this.dlgAnim.on(cc.Animation.EventType.FINISHED,this.onAnimFinished,this))},e.prototype.resetInEditor=function(){},e.prototype.onAnimFinished=function(){this.dlgAnim.currentClip===this.closeClip&&this.close()},e.prototype.playOpen=function(){this.dlgAnim&&this.openClip&&this.dlgAnim.play(this.openClip.name)},e.prototype.playClose=function(){if(this.dlgAnim&&this.closeClip){if(this.dlgAnim.getAnimationState(this.closeClip.name).isPlaying)return;this.dlgAnim.play(this.closeClip.name)}else this.close()},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.close=function(){this._resolveList.forEach(function(t){t()}),this.node.removeFromParent(),this.node.destroy()},e.prototype.onClickClose=function(){this.playClose()},e.prototype.addResolve=function(t){a.default.arrayAdd(this._resolveList,t)},e.pUrl="",r([l(cc.Animation)],e.prototype,"dlgAnim",void 0),r([l({type:cc.AnimationClip,tooltip:!1,visible:function(){return!!this.dlgAnim}})],e.prototype,"openClip",void 0),r([l({type:cc.AnimationClip,tooltip:!1,visible:function(){return!!this.dlgAnim}})],e.prototype,"closeClip",void 0),r([c,u,p("Framework/\u57fa\u7840\u7ec4\u4ef6/DialogBase")],e)}(cc.Component);i.default=h,cc._RF.pop()},{"../../util/EditorTool":"EditorTool","../../util/Tool":"Tool"}],DlgUpLevel:[function(t,e,i){"use strict";cc._RF.push(e,"f5080k3BVFM+78jhW8SiadE","DlgUpLevel");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../common/cmpt/base/DialogBase"),s=t("../../common/cmpt/ui/MargeAnim"),c=t("../../common/const/Url"),l=t("../../common/util/AudioManager"),u=t("../../game/BuildsInfo"),p=t("../../game/GameMgr"),h=t("../../manager/DataManager"),f=cc._decorator,d=f.ccclass,_=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.light=null,e.anim=null,e.buildsName=null,e.coinLabel=null,e.rollLabel=null,e.rollGetLb=null,e.moneyGetLb=null,e.speed=100,e}return o(e,t),e.prototype.onDestroy=function(){l.default.stopAll()},e.prototype.open=function(){var t=h.DataManager.instance.level,e=new u.BuildsInfo(t);e&&(this.anim.init(t),this.buildsName.string="\u7b49\u7ea7"+e.level+" "+e.name,this.coinLabel.string="\u6bcf\u79d2\u751f\u4ea7\u94f6\u5e01 "+e.incomeCoin+" \u4e2a",this.rollLabel.string="\u6bcf\u5c0f\u65f6\u751f\u4ea7\u96f2\u5238 "+e.incomeRoll+" \u5f20",this.rollGetLb.string="\u96f2\u5238 "+e.roll+" \u5f20",this.moneyGetLb.string="\u73b0\u91d1 "+e.money+" \u5143",p.default.install.money+=e.money,p.default.install.roll+=e.roll)},e.prototype.update=function(t){this.light.angle-=t*this.speed},e.pUrl=c.DirUrl.PREFAB_DIALOG+"DlgUpLevel",r([_(cc.Node)],e.prototype,"light",void 0),r([_(s.default)],e.prototype,"anim",void 0),r([_(cc.Label)],e.prototype,"buildsName",void 0),r([_(cc.Label)],e.prototype,"coinLabel",void 0),r([_(cc.Label)],e.prototype,"rollLabel",void 0),r([_(cc.Label)],e.prototype,"rollGetLb",void 0),r([_(cc.Label)],e.prototype,"moneyGetLb",void 0),r([d],e)}(a.default);i.default=y,cc._RF.pop()},{"../../common/cmpt/base/DialogBase":"DialogBase","../../common/cmpt/ui/MargeAnim":"MargeAnim","../../common/const/Url":"Url","../../common/util/AudioManager":"AudioManager","../../game/BuildsInfo":"BuildsInfo","../../game/GameMgr":"GameMgr","../../manager/DataManager":"DataManager"}],Drag:[function(t,e,i){"use strict";cc._RF.push(e,"670f7TE+n1JmK+KsX+XNcoG","Drag");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._initPos=new cc.Vec2,e._limitY=!1,e._moveScale=1,e}return o(e,t),e.prototype.addEvent=function(t,e,i,n,o){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!1),this._dragEndCb=t,this._dragTarget=e,this._arg=i,this._dragStartCb=n,this._limitY=o},e.prototype.setDragState=function(t){t?this.onEvent():this.offEvent()},e.prototype.setMoveScale=function(t){this._moveScale=t},e.prototype.onLoad=function(){this.onEvent()},e.prototype.start=function(){this._initPos=this.node.getPosition()},e.prototype.setInitPosition=function(t){this._initPos=t},e.prototype.getInitPosition=function(){return this._initPos},e.prototype.touchStart=function(t){this.enabled&&this._dragStartCb&&this._dragTarget&&this._dragStartCb.call(this._dragTarget,t,this._arg)},e.prototype.touchMove=function(t){if(this.enabled){var e=t.touch.getDelta(),i=t.getCurrentTarget();i.x+=e.x/this._moveScale,this._limitY||(i.y+=e.y/this._moveScale)}},e.prototype.touchEnd=function(t){this.enabled&&this._dragEndCb&&this._dragTarget&&this._dragEndCb.call(this._dragTarget,t,this._arg)},e.prototype.onDestroy=function(){this.offEvent()},e.prototype.onEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this)},e.prototype.offEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this)},e.prototype.resetDrag=function(){this.node.setPosition(this._initPos)},r([s],e)}(cc.Component));i.default=c,cc._RF.pop()},{}],EditorBoxHack:[function(t,e){"use strict";cc._RF.push(e,"4a973xjr51JNIXUFY3Q2XsC","EditorBoxHack"),cc.sys.platform===cc.sys.MOBILE_BROWSER&&(cc.EditBox._ImplClass.prototype._adjustWindowScroll=function(){var t=this;setTimeout(function(){if(window.scrollY<100){var e=t._delegate;if(e&&e.node){var i=e.node.getBoundingBoxToWorld(),n=document.documentElement.scrollHeight||document.body.scrollHeight,o=document.documentElement.clientHeight||document.body.clientHeight,r=cc.winSize.height/n,a=n-o,s=a*r;if(console.error("scrollHeight: "+n+", clientHeight: "+o+", ratio: "+r),console.error("keyboardDomHeight: "+a+", keyboardCocosHeight: "+s),i.yMin>=s)return void console.error("return");var c=(s-i.yMin)/r;window.scroll({top:c,behavior:"smooth"}),console.error("domDelta: "+c)}else t._elem.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"}),console.error("scrollIntoView")}},500)}),cc._RF.pop()},{}],EditorTool:[function(t,e,i){"use strict";cc._RF.push(e,"50fe9qyZR5LgYuxXN3oK78x","EditorTool"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.load=function(){return new Promise(function(t){t(null)})},t.setClassAttrPropEnum=function(){},t.refreshSelectedInspector=function(){},t}();i.default=n,cc._RF.pop()},{}],En:[function(t,e,i){"use strict";cc._RF.push(e,"e1a79yRjpZFiZ8ShC5YIRcu","En"),Object.defineProperty(i,"__esModule",{value:!0}),i.default={lang:"English",text1:"number: %{num}",text2:"param1: %{arg1}, param2: %{arg2}"},cc._RF.pop()},{}],EventName:[function(t,e,i){"use strict";cc._RF.push(e,"52bf65jN2xMY6Ig2aroKkQw","EventName"),Object.defineProperty(i,"__esModule",{value:!0}),i.EventName=void 0,function(t){t[t.RESIZE=0]="RESIZE",t[t.UPDATE_LOCALIZED_CMPT=1]="UPDATE_LOCALIZED_CMPT",t[t.GAME_PAUSE=2]="GAME_PAUSE",t[t.GAME_RESUME=3]="GAME_RESUME",t[t.TIME_SCALE=4]="TIME_SCALE",t[t.CAMERA_MOVE=5]="CAMERA_MOVE",t[t.EVENT_TEST1=6]="EVENT_TEST1",t[t.EVENT_TEST2=7]="EVENT_TEST2"}(i.EventName||(i.EventName={})),cc._RF.pop()},{}],Events:[function(t,e,i){"use strict";cc._RF.push(e,"aae4cQnarlFE4m+zeU7vd7m","Events");var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.preloadEvent=i.eventsOnEnable=i.eventsOnLoad=void 0;var r=t("../const/EventName");function a(t,e,i,n){void 0===n&&(n=!0);var o=t.prototype[e],r=t.prototype[i];t.prototype[e]=function(){s.targetOn(this,n),o&&o.call(this)},t.prototype[i]=function(){s.targetOff(this),r&&r.call(this)}}i.eventsOnLoad=function(t){return void 0===t&&(t=!0),function(e){a(e,"onLoad","onDestroy",t)}},i.eventsOnEnable=function(t){return void 0===t&&(t=!0),function(e){a(e,"onEnable","onDisable",t)}},i.preloadEvent=function(t,e){return void 0===e&&(e=!1),function(i,n){var o=s.classMap.get(i.constructor);if(void 0===o)o=[],s.classMap.set(i.constructor,o);else if(o.find(function(e){return e.event===t&&e.funcName===n}))return void cc.error("event: "+r.EventName[t]+" \u91cd\u590d\u8f7d\u5165");o.push({event:t,funcName:n,once:e})}};var s=function(){function t(){}return t.targetOn=function(t,e){var i=this;if(void 0===e&&(e=!0),e)this.classMap.forEach(function(e,n){if(t instanceof n)for(var o=0;o<e.length;o++){var r=e[o];i.on(r.event,t[r.funcName],t,r.once)}});else{var n=this.classMap.get(t.constructor);if(n)for(var o=0;o<n.length;o++){var r=n[o];this.on(r.event,t[r.funcName],t,r.once)}}},t.on=function(t,e,i,n){if(void 0===n&&(n=!1),e&&i){var o=this._eventsMap.get(t),a=[];if(void 0===o)(o=new Map).set(i,a),this._eventsMap.set(t,o);else if(void 0===(a=o.get(i)))a=[],o.set(i,a);else if(a.find(function(t){return t.cb===e}))return void cc.error("event: "+r.EventName[t]+" \u91cd\u590d\u6ce8\u518c");var s={cb:e,once:n};a.push(s)}else cc.error("event: "+r.EventName[t]+" listener\u6216target\u4e0d\u80fd\u4e3a\u7a7a")},t.once=function(t,e,i){this.on(t,e,i,!0)},t.off=function(t,e,i){if(e&&i){var n=this._eventsMap.get(t);if(void 0!==n){var o=n.get(i);if(void 0!==o){var a=o.findIndex(function(t){return t.cb===e});a<0?cc.error("event: "+r.EventName[t]+" target\u4e0a\u672a\u4ee5\u8be5listener\u6ce8\u518c\u8be5\u4e8b\u4ef6"):(o.splice(a,1),o.length<=0&&(n.delete(i),n.size<=0&&this._eventsMap.delete(t)))}else cc.error("event: "+r.EventName[t]+" target\u4e0a\u672a\u6ce8\u518c\u8be5\u4e8b\u4ef6")}else cc.error("event: "+r.EventName[t]+" \u672a\u6ce8\u518c\u8be5\u4e8b\u4ef6")}else cc.error("event: "+r.EventName[t]+" listener\u6216target\u4e0d\u80fd\u4e3a\u7a7a")},t.targetOff=function(t){var e=this;t?this._eventsMap.forEach(function(i,n){i.delete(t),i.size<=0&&e._eventsMap.delete(n)}):cc.error("event: "+t+" target\u4e0d\u80fd\u4e3a\u7a7a")},t.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this._eventsMap.get(t);if(void 0!==n){var o,a=[],s=[];for(n.forEach(function(t,e){for(o=0;o<t.length;o++){var i=t[o];a.push({cb:i.cb,target:e}),i.once&&s.push({cb:i.cb,target:e})}}),o=0;o<s.length;o++){var c=s[o];this.off(t,c.cb,c.target)}for(o=0;o<a.length;o++)(c=a[o]).cb.apply(c.target,e)}else cc.warn("event: "+r.EventName[t]+" \u672a\u6ce8\u518c\u8be5\u4e8b\u4ef6")},t.emitAsync=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return n(this,void 0,Promise,function(){var i,n,a,s,c,l;return o(this,function(o){switch(o.label){case 0:if(void 0===(i=this._eventsMap.get(t)))return cc.warn("event: "+r.EventName[t]+" \u672a\u6ce8\u518c\u8be5\u4e8b\u4ef6"),[2];for(a=[],s=[],i.forEach(function(t,e){for(n=0;n<t.length;n++){var i=t[n];a.push({cb:i.cb,target:e}),i.once&&s.push({cb:i.cb,target:e})}}),n=0;n<s.length;n++)l=s[n],this.off(t,l.cb,l.target);for(c=[],n=0;n<a.length;n++)l=a[n],c.push(l.cb.apply(l.target,e));return[4,Promise.all(c)];case 1:return o.sent(),[2]}})})},t.classMap=new Map,t._eventsMap=new Map,t}();i.default=s,cc._RF.pop()},{"../const/EventName":"EventName"}],GameMgr:[function(t,e,i){"use strict";cc._RF.push(e,"da1fcyojMdLrK0YzS7ts7Yp","GameMgr");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../manager/DataManager"),s=t("./GameScene"),c=t("./UserData"),l=cc._decorator,u=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coinLabel=null,e.coinIncomeLabel=null,e.rollLabel=null,e.rollIncomeLabel=null,e.moneyLabel=null,e._coinTotalIncome=0,e._rollTotalIncome=0,e}var i;return o(e,t),i=e,Object.defineProperty(e.prototype,"coin",{get:function(){return this.userData.coin},set:function(t){this.userData.coin=t,this.coinLabel.string=t.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roll",{get:function(){return this.userData.roll},set:function(t){this.userData.roll=t,this.rollLabel.string=t.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"money",{get:function(){return this.userData.roll},set:function(t){this.userData.money=t,this.moneyLabel.string=t.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coinTotalIncome",{get:function(){return a.DataManager.instance.coinBuildsIncome+a.DataManager.instance.coinLevelIncome||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rollTotalIncome",{get:function(){return a.DataManager.instance.rollBuildsIncome+a.DataManager.instance.rollLevelIncome||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"createLevel",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shopMoney",{get:function(){return 50},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){i.install=this,this.userData=new c.UserData,this.coin=100,this.roll=0,this.money=0,this.schedule(this.getIncome,5),this.schedule(this.getIncome,5),this.reload()},e.prototype.getNodeRect=function(t){var e=t.convertToWorldSpaceAR(cc.v2(0,0)),i=Math.abs(t.scaleX*t.width),n=Math.abs(t.scaleY*t.height),o=e.x-(t.anchorX-.5)*i,r=e.y-(t.anchorY-.5)*n;return new cc.Rect(o-i/2,r-n/2,i,n)},e.prototype.getIncome=function(){cc.tween(this.coinLabel.node).to(.3,{scale:1.25}).to(.3,{scale:1}).start(),this.coin+=5*this.coinTotalIncome},e.prototype.addBuilds=function(){var t=a.DataManager.instance.getCreateIndex();-1!=t&&(this.coin<this.shopMoney||(this.coin-=this.shopMoney,s.default.instance.createBuilds(this.createLevel,t)))},e.prototype.reload=function(){this.coinIncomeLabel.string="\u6bcf\u79d2\u751f\u4ea7\u94f6\u5e01 "+this.coinTotalIncome+" \u4e2a",this.rollIncomeLabel.string="\u6bcf\u5c0f\u65f6\u751f\u4ea7\u96f2\u5238 "+this.rollTotalIncome+" \u5f20"},e.prototype.update=function(){this._coinTotalIncome==this.coinTotalIncome&&this._rollTotalIncome==this.rollTotalIncome||(this._coinTotalIncome=this.coinTotalIncome,this._rollTotalIncome=this.rollTotalIncome,this.reload())},r([p(cc.Label)],e.prototype,"coinLabel",void 0),r([p(cc.Label)],e.prototype,"coinIncomeLabel",void 0),r([p(cc.Label)],e.prototype,"rollLabel",void 0),r([p(cc.Label)],e.prototype,"rollIncomeLabel",void 0),r([p(cc.Label)],e.prototype,"moneyLabel",void 0),i=r([u],e)}(cc.Component);i.default=h,cc._RF.pop()},{"../manager/DataManager":"DataManager","./GameScene":"GameScene","./UserData":"UserData"}],GameScene:[function(t,e,i){"use strict";cc._RF.push(e,"f2e6cNxssNCTo8SyHarayAq","GameScene");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./BuildsItem"),s=t("../manager/DataManager"),c=t("../common/util/Tool"),l=t("../common/cmpt/base/Layer"),u=t("../showcase/dialog/DlgUpLevel"),p=t("../manager/SystemManager"),h=t("../common/cmpt/ui/MargeAnim"),f=cc._decorator,d=f.ccclass,_=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.posNode=[],e.buildsPrefab=null,e.delNode=null,e.AnimSF=[],e.animPrefab=null,e.buildsList=new Map,e.buildsPrefabList=[],e.animPrefabList=[],e.animIndex=-1,e.animSFIndex=0,e.dragIndex=-1,e._move=!1,e}var i;return o(e,t),i=e,e.prototype.onLoad=function(){i.instance=this,this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),this.posNode.map(function(t){t.getChildByName("anim").active=!1}),this.initScene()},e.prototype.initScene=function(){var t=this;s.DataManager.instance.getBuildsData().map(function(e,i){0!=e&&t.createBuilds(e,i)})},e.prototype.createBuilds=function(t,e){if(-1!=e){s.DataManager.instance.setBuilds(e,t);var i=void 0;(i=this.buildsPrefabList.length?this.buildsPrefabList.splice(0,1)[0]:cc.instantiate(this.buildsPrefab)).parent=this.posNode[e],i.setPosition(0,0);var n=i.getComponent(a.default);n.init(e,t),this.buildsList.set(e,n)}},e.prototype.getAnimNode=function(){return this.animPrefabList.length?this.animPrefabList.splice(0,1)[0]:cc.instantiate(this.animPrefab)},e.prototype.touchStart=function(t){if(this._move=!1,this.dragIndex=this.getIndexByPosition(t.getLocation()),-1!=this.dragIndex){var e=this.buildsList.get(this.dragIndex);e&&(this._move=!0,e.node.parent=this.node,e.node.setPosition(this.node.convertToNodeSpaceAR(t.getLocation())))}},e.prototype.touchMove=function(t){if(this._move){var e=this.getIndexByPosition(t.getLocation());this.showAnim(e),this.buildsList.get(this.dragIndex).node.setPosition(this.node.convertToNodeSpaceAR(t.getLocation()))}},e.prototype.touchEnd=function(t){if(this._move){this.clearAnim(),this._move=!1;var e=this.getIndexByPosition(t.getLocation()),i=this.buildsList.get(this.dragIndex);if(-1!=e)if(e==this.dragIndex)i.node.parent=this.posNode[e],i.node.setPosition(0,0),i.stopAnim();else{var n=s.DataManager.instance.getBuilds(e);if(0==n)i.node.parent=this.posNode[e],i.node.setPosition(0,0),s.DataManager.instance.exchangePosition(this.dragIndex,e),this.buildsList.delete(this.dragIndex),this.buildsList.set(e,i),i.startAnim();else if(n!=i.level)this.exchangePosition(this.dragIndex,e),i.startAnim();else{var o=n+1;this.delBuilds(this.dragIndex),this.delBuilds(e),n==s.DataManager.instance.maxLevel?p.SystemManager.instance.sendMessage(p.SystemType.NewBuilds,38):(this.showMarge(o,e),o>s.DataManager.instance.level&&(s.DataManager.instance.level=o,l.default.inst.openDialogAsync(u.default.pUrl)))}}else c.default.isCoincide(i.node,this.delNode)?1==s.DataManager.instance.getBuildsNum(i.level)&&i.level==s.DataManager.instance.level?(i.node.parent=this.posNode[this.dragIndex],i.node.setPosition(0,0),i.startAnim()):(i.sale(),this.delBuilds(this.dragIndex)):(i.node.parent=this.posNode[this.dragIndex],i.node.setPosition(0,0),i.startAnim());this.dragIndex=-1}},e.prototype.showMarge=function(t,e){var i=this,n=this.getAnimNode();n.parent=this.posNode[e],n.getComponent(h.default).init(t,function(){n.parent=null,i.animPrefabList.push(n),i.createBuilds(t,e)},this)},e.prototype.delBuilds=function(t){var e=this.buildsList.get(t);e.stopAnim(),e.node.parent=null,this.buildsPrefabList.push(e.node),this.buildsList.delete(t),s.DataManager.instance.delBuilds(t)},e.prototype.exchangePosition=function(t,e){var i=this.buildsList.get(t),n=this.buildsList.get(e);this.buildsList.set(e,i),this.buildsList.set(t,n),i&&(i.node.parent=this.posNode[e],i.posIndex=e,i.node.setPosition(0,0)),n&&(n.node.parent=this.posNode[t],n.posIndex=t,n.node.setPosition(0,0)),s.DataManager.instance.exchangePosition(t,e)},e.prototype.showAnim=function(t){-1==t&&-1!=this.animIndex&&this.clearAnim(),-1!=t&&this.animIndex!=t&&(this.clearAnim(),this.animIndex=t,this.posNode[t].getChildByName("anim").active=!0,this.animSFIndex=1,this.changeAnimSF(),this.schedule(this.changeAnimSF,.5))},e.prototype.clearAnim=function(){this.unschedule(this.changeAnimSF),-1!=this.animIndex&&(this.posNode[this.animIndex].getChildByName("anim").active=!1,this.animIndex=-1)},e.prototype.changeAnimSF=function(){-1!=this.animIndex&&(this.animSFIndex=1==this.animSFIndex?0:1,this.posNode[this.animIndex].getChildByName("anim").getComponent(cc.Sprite).spriteFrame=this.AnimSF[this.animSFIndex])},e.prototype.getIndexByPosition=function(t){for(var e=0;e<this.posNode.length;e++){var i=this.posNode[e].convertToWorldSpaceAR(cc.v2(0,0));if(t.x>i.x-this.posNode[e].width/2&&t.x<i.x+this.posNode[e].width/2&&t.y>i.y-this.posNode[e].height/2&&t.y<i.y+this.posNode[e].height/2)return e}return-1},r([_([cc.Node])],e.prototype,"posNode",void 0),r([_(cc.Prefab)],e.prototype,"buildsPrefab",void 0),r([_(cc.Node)],e.prototype,"delNode",void 0),r([_([cc.SpriteFrame])],e.prototype,"AnimSF",void 0),r([_(cc.Prefab)],e.prototype,"animPrefab",void 0),i=r([d],e)}(cc.Component);i.default=y,cc._RF.pop()},{"../common/cmpt/base/Layer":"Layer","../common/cmpt/ui/MargeAnim":"MargeAnim","../common/util/Tool":"Tool","../manager/DataManager":"DataManager","../manager/SystemManager":"SystemManager","../showcase/dialog/DlgUpLevel":"DlgUpLevel","./BuildsItem":"BuildsItem"}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"1ee18MAKgRPz4Ig/89N8gDX","Game");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../common/cmpt/base/Layer"),s=t("../../common/const/Url"),c=t("../../common/util/Events"),l=cc._decorator,u=l.ccclass,p=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onClickHome=function(){a.default.inst.enterMain(s.ResUrl.PREFAB.HOME)},e.prototype.onShowTip=function(){a.default.inst.showTip({text:"\u8fd9\u662f\u4e00\u6bb5\u63d0\u793a",end:cc.v2(0,100),duration:.3})},r([u,c.eventsOnLoad()],e)}(cc.Component));i.default=p,cc._RF.pop()},{"../../common/cmpt/base/Layer":"Layer","../../common/const/Url":"Url","../../common/util/Events":"Events"}],Home:[function(t,e,i){"use strict";cc._RF.push(e,"1d227cGCflICZGjBQkLC7vS","Home");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../manager/SystemManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.delIcon=null,e}var i;return o(e,t),i=e,e.prototype.onLoad=function(){i.install=this},e.prototype.onClick=function(t,e){a.SystemManager.instance.sendMessage(a.SystemType.OpenPage,e)},r([l(cc.Node)],e.prototype,"delIcon",void 0),i=r([c],e)}(cc.Component);i.default=u,cc._RF.pop()},{"../../manager/SystemManager":"SystemManager"}],I18nLabel:[function(t,e,i){"use strict";cc._RF.push(e,"102e7zRjoBIIaR3Sun9XFVJ","I18nLabel");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../const/EventName"),c=t("../../../util/Events"),l=t("../../../util/I18n"),u=cc._decorator,p=u.ccclass,h=u.property,f=u.executeInEditMode,d=u.menu,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._textKey="",e._option=[],e._label=null,e}return o(e,t),Object.defineProperty(e.prototype,"textKey",{get:function(){return this._textKey},set:function(t){this._textKey=t,this.updateLabel()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label||(this._label=this.node.getComponent(cc.Label)||this.node.getComponent(cc.RichText),this._label)?this._label:(cc.error("Failed to update localized label, label component is invalid!"),null)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){try{l.default.init(),this.updateLabel()}catch(t){cc.error(t)}},e.prototype.update=function(){},e.prototype.updateLabel=function(){var t=this._option instanceof Array?l.default.getText.apply(l.default,a([this._textKey],this._option)):l.default.getText(this._textKey,this._option);t&&(this.label.string=t)},e.prototype.setTextKeyAndOption=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._textKey=t,this.setOption.apply(this,e)},e.prototype.setOption=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];1===t.length&&"[object Object]"===Object.prototype.toString.call(t[0])?this._option=t[0]:this._option=t,this.updateLabel()},e.prototype.clear=function(){this.label.string="",this.textKey=""},r([h(cc.String)],e.prototype,"_textKey",void 0),r([h({type:cc.String,tooltip:"i18n key"})],e.prototype,"textKey",null),r([c.preloadEvent(s.EventName.UPDATE_LOCALIZED_CMPT)],e.prototype,"updateLabel",null),r([p,c.eventsOnLoad(),f,d("Framework/I18N/I18nLabel")],e)}(cc.Component);i.default=_,cc._RF.pop()},{"../../../const/EventName":"EventName","../../../util/Events":"Events","../../../util/I18n":"I18n"}],I18nSprite:[function(t,e,i){"use strict";cc._RF.push(e,"80273mEm6FKI6l1JI2ok2rH","I18nSprite");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../../const/EventName"),s=t("../../../util/Events"),c=t("../../../util/I18n"),l=t("../res/ResSprite"),u=cc._decorator,p=u.ccclass,h=u.menu,f=u.requireComponent,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sprite=null,e._imageKey="",e}return o(e,t),Object.defineProperty(e.prototype,"imageKey",{get:function(){return this._imageKey},set:function(t){this._imageKey!==t&&(this._imageKey=t,this.updateSprite())},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){try{c.default.init(),this._sprite=this.getComponent(l.default),this._sprite.spriteFrame&&(this.imageKey=this._sprite.spriteFrame.name)}catch(t){cc.error(t)}},e.prototype.updateSprite=function(){if(this.imageKey){var t="";switch(c.default.curLang){case c.LangType.ZH:t="textures/localizedImage/zh/";break;case c.LangType.EN:t="textures/localizedImage/en/";break;default:return}t+=this.imageKey,this._sprite.setSpriteFrame(t)}},r([s.preloadEvent(a.EventName.UPDATE_LOCALIZED_CMPT)],e.prototype,"updateSprite",null),r([p,s.eventsOnLoad(),f(l.default),h("Framework/I18N/I18nSprite")],e)}(cc.Component);i.default=d,cc._RF.pop()},{"../../../const/EventName":"EventName","../../../util/Events":"Events","../../../util/I18n":"I18n","../res/ResSprite":"ResSprite"}],I18n:[function(t,e,i){"use strict";cc._RF.push(e,"a24383d1j1FRbXaBkcPctfn","I18n");var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(i,"__esModule",{value:!0}),i.LangType=void 0;var o,r=t("../config/En"),a=t("../config/Zh"),s=t("../const/EventName"),c=t("./Events"),l=t("./Tool");(function(t){t.NONE="",t.ZH="zh",t.EN="en"})(o=i.LangType||(i.LangType={}));var u=function(){function t(){}return Object.defineProperty(t,"curLang",{get:function(){return this._curLang},enumerable:!1,configurable:!0}),t.init=function(t){if(void 0===t&&(t=o.NONE),!this._init){this._init=!0;var e=t||cc.sys.language;this.switch(e)}},t.switch=function(t){if(this._curLang!==t){switch(this._curLang=t,t){case o.ZH:this._phrases=a.default;break;case o.EN:this._phrases=r.default;break;default:this._curLang=o.EN,this._phrases=r.default}this.updateLocalizedCmpt()}},t.updateLocalizedCmpt=function(){c.default.emit(s.EventName.UPDATE_LOCALIZED_CMPT)},t.getKeyByValue=function(t){if(!this._phrases)return cc.error("[I18n.getKeyByValue] \u672a\u6b63\u786e\u521d\u59cb\u5316"),"";for(var e in this._phrases)if(this._phrases[e]===t)return e;return""},t.getText=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(!this._phrases)return cc.error("[I18n.getText] \u672a\u6b63\u786e\u521d\u59cb\u5316"),"";if(!t)return"";var o=this._phrases.hasOwnProperty(t)?this._phrases[t]:t;return l.default.formatString.apply(l.default,n([o],e))},t._init=!1,t._phrases=null,t._curLang=o.NONE,t}();i.default=u,cc._RF.pop()},{"../config/En":"En","../config/Zh":"Zh","../const/EventName":"EventName","./Events":"Events","./Tool":"Tool"}],Layer:[function(t,e,i){"use strict";cc._RF.push(e,"a6e48AvPltFQqwiI4zAsMqx","Layer");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},a=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},c=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(i,"__esModule",{value:!0});var l=t("../../const/Url"),u=t("../../util/Res"),p=t("../../util/Tool"),h=t("./DialogBase"),f=t("./Tip"),d=cc._decorator,_=d.ccclass,y=d.property,m=d.disallowMultiple,g=d.menu,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mainLayer=null,e.dialogLayer=null,e.loadingLayer=null,e.tipLayer=null,e._loadingCount=0,e._tipPool=[],e._tipTexts=[],e}var i;return o(e,t),i=e,e.prototype.resetInEditor=function(){},e.prototype.onLoad=function(){i.inst=this,this.hideLoading()},e.prototype.onDestroy=function(){i.inst=null},e.prototype.getNameByUrl=function(t){return t.substring(t.lastIndexOf("/")+1,t.length)},e.prototype.enterMain=function(t){return a(this,void 0,Promise,function(){var e,i;return s(this,function(n){switch(n.label){case 0:return this.showLoading(),[4,u.default.load(t,cc.Prefab)];case 1:return e=n.sent(),this.hideLoading(),e?(this.mainLayer.destroyAllChildren(),this.closeDialogs(),this.clearTips(),(i=u.default.instantiate(e)).setPosition(0,0),this.mainLayer.addChild(i),[2,i]):(cc.error("[Layer.enterMain] can not find prefab: "+t),[2,null])}})})},e.prototype.getDialog=function(t){for(var e=0;e<this.dialogLayer.childrenCount;e++){var i=this.dialogLayer.children[e].getComponent(h.default);if(i&&i.prefabUrl===t)return i}return null},e.prototype.openDialog=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=u.default.get(t,cc.Prefab);if(n){var o=u.default.instantiate(n);this.dialogLayer.addChild(o),o.setPosition(0,0);var r=o.getComponent(h.default);r&&(r._prefabUrl=t,r.playOpen(),r.open.apply(r,e))}else cc.error("[Layer.openDialog] can not find dialog prefab: "+t)},e.prototype.openUniDialog=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.getDialog(t)||this.openDialog.apply(this,c([t],e))},e.prototype.openDialogAsync=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return a(this,void 0,Promise,function(){var i,n,o;return s(this,function(r){switch(r.label){case 0:return this.showLoading(),[4,u.default.load(t,cc.Prefab)];case 1:return i=r.sent(),this.hideLoading(),i?(n=u.default.instantiate(i),this.dialogLayer.addChild(n),n.setPosition(0,0),(o=n.getComponent(h.default))&&(o._prefabUrl=t,o.playOpen(),o.open.apply(o,e)),[2]):(cc.error("[Layer.openDialogAsync] can not find dialog prefab: "+t),[2])}})})},e.prototype.openUniDialogAsync=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return a(this,void 0,Promise,function(){return s(this,function(i){switch(i.label){case 0:return this.getDialog(t)?[2]:[4,this.openDialogAsync.apply(this,c([t],e))];case 1:return i.sent(),[2]}})})},e.prototype.closeDialog=function(t,e){void 0===e&&(e=!1);var i=this.getDialog(t);i&&(e?i.playClose():i.close())},e.prototype.closeDialogs=function(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);for(var i=this.dialogLayer.childrenCount-1;i>=0;i--){var n=this.dialogLayer.children[i].getComponent(h.default);n&&(t&&n.prefabUrl!==t||(e?n.playClose():n.close()))}},e.prototype.waitCloseDialog=function(t){return a(this,void 0,Promise,function(){var e;return s(this,function(i){switch(i.label){case 0:return(e=this.getDialog(t))?[4,new Promise(function(t){e.addResolve(t)})]:[2];case 1:return[2,i.sent()]}})})},e.prototype.waitCloseDialogs=function(t){return a(this,void 0,Promise,function(){var e,i,n,o;return s(this,function(r){switch(r.label){case 0:for(e=[],i=function(i){var o=n.dialogLayer.children[i].getComponent(h.default);if(!o)return"continue";o.prefabUrl===t&&e.push(new Promise(function(t){o.addResolve(t)}))},n=this,o=0;o<this.dialogLayer.childrenCount;o++)i(o);return[4,Promise.all(e)];case 1:return[2,r.sent()]}})})},e.prototype.showTip=function(t){var e;return a(this,void 0,Promise,function(){var i,n,o,r,a,c,h,d=this;return s(this,function(s){switch(s.label){case 0:return i=null,(i="string"==typeof t?{text:t}:t).hasOwnProperty("unique")||(i.unique=!1),i.hasOwnProperty("duration")||(i.duration=1),i.hasOwnProperty("fade")||(i.fade=.5),i.hasOwnProperty("start")||(i.start=cc.v2(0,0)),i.hasOwnProperty("end")||(i.end=cc.v2(0,0)),i.unique&&p.default.arrayHas(this._tipTexts,i.text)?[2]:(this._tipTexts.push(i.text),n=null,this._tipPool.length>0?(n=this._tipPool.shift(),[3,3]):[3,1]);case 1:return[4,u.default.load(l.ResUrl.PREFAB.TIP,cc.Prefab)];case 2:if(!(o=s.sent()))return cc.error("[Layer.showTip] can not load prefab: "+l.ResUrl.PREFAB.TIP),[2];n=u.default.instantiate(o),this.tipLayer.addChild(n),s.label=3;case 3:return r=cc.delayTime(i.duration),a=cc.fadeOut(i.fade),c=cc.moveTo(i.fade,i.end),h=cc.callFunc(function(){n.active=!1,d._tipPool.push(n),p.default.arrayDelete(d._tipTexts,i.text)}),n.active=!0,n.opacity=255,n.setPosition(i.start),n.setSiblingIndex(this.tipLayer.childrenCount-1),n.runAction(cc.sequence(r,cc.spawn(a,c),h)),null===(e=n.getComponent(f.default))||void 0===e||e.init(i.text),[2]}})})},e.prototype.clearTips=function(){this._tipPool.length=0,this._tipTexts.length=0,this.tipLayer.destroyAllChildren()},e.prototype.showLoading=function(){if(this._loadingCount++,!this.loadingLayer.active){this.loadingLayer.active=!0;var t=this.loadingLayer.getChildByName("content");t&&(t.active=!1,this.unscheduleAllCallbacks(),p.default.waitCmpt(this,.5).then(function(){t.active=!0}))}},e.prototype.hideLoading=function(){this._loadingCount--,this._loadingCount<=0&&(this._loadingCount=0,this.loadingLayer.active=!1,this.unscheduleAllCallbacks())},e.inst=null,r([y(cc.Node)],e.prototype,"mainLayer",void 0),r([y(cc.Node)],e.prototype,"dialogLayer",void 0),r([y(cc.Node)],e.prototype,"loadingLayer",void 0),r([y(cc.Node)],e.prototype,"tipLayer",void 0),i=r([_,m,g("Framework/\u57fa\u7840\u7ec4\u4ef6/Layer")],e)}(cc.Component);i.default=v,cc._RF.pop()},{"../../const/Url":"Url","../../util/Res":"Res","../../util/Tool":"Tool","./DialogBase":"DialogBase","./Tip":"Tip"}],LoopList:[function(t,e,i){"use strict";cc._RF.push(e,"47957NchK9M3pnXr5DdUH/B","LoopList");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a,s=t("../../../util/Res"),c=cc._decorator,l=c.ccclass,u=c.property,p=c.requireComponent,h=c.disallowMultiple,f=c.menu;(function(t){t[t.NODE=0]="NODE",t[t.PREFAB=1]="PREFAB"})(a||(a={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.templateType=a.PREFAB,e.templatePrefab=null,e.templateNode=null,e._firstDirty=!1,e._refreshDirty=!1,e._curIdx=0,e._midIdx=2,e._dataLen=0,e._refreshCall=null,e._target=null,e._pageView=null,e}return o(e,t),Object.defineProperty(e.prototype,"pageView",{get:function(){return this._pageView||(this._pageView=this.getComponent(cc.PageView)),this._pageView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this.pageView.content.parent},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.node.on("scroll-ended",this.onScrollEnd,this)},e.prototype.lateUpdate=function(){0!==this.pageView.getPages().length&&(this._firstDirty&&(this._firstDirty=!1,this.pageView.setContentPosition(cc.v2(-this.view.width/2-this._midIdx*this.view.width,0)),this.pageView.setCurrentPageIndex(this._midIdx)),this._refreshDirty&&(this._refreshDirty=!1,this.refresh()))},e.prototype.onInit=function(t,e,i,n){if(void 0===n&&(n=null),this._dataLen=t,this._curIdx=cc.misc.clampf(e,0,this._dataLen-1),this._refreshCall=i,this._target=n,this._firstDirty=!0,this._refreshDirty=!0,0===this.pageView.getPages().length){for(var o=this.templateType===a.PREFAB?this.templatePrefab:this.templateNode,r=0;r<5;r++){var c=s.default.instantiate(o,this.node);c.active=!0,c.setPosition(0,0),this.pageView.addPage(c)}this.pageView.content.getComponent(cc.Layout).updateLayout()}},e.prototype.resetData=function(t,e){void 0===e&&(e=null),this._dataLen=t,this._curIdx=cc.misc.clampf(null===e?this._curIdx:e,0,this._dataLen-1),this._refreshDirty=!0},e.prototype.setCurIdx=function(t){this._curIdx=t,this._refreshDirty=!0},e.prototype.onScrollEnd=function(){var t=this.pageView.getCurrentPageIndex();if(t!==this._midIdx){for(this.pageView.setContentPosition(cc.v2(-this.view.width/2-this._midIdx*this.view.width,0)),this.pageView.setCurrentPageIndex(this._midIdx),this._curIdx+=t-this._midIdx;this._curIdx<0;)this._curIdx+=this._dataLen;for(;this._curIdx>this._dataLen-1;)this._curIdx-=this._dataLen;this._refreshDirty=!0}},e.prototype.refresh=function(){var t=this;this.pageView.content.children.forEach(function(e,i){for(var n=t._curIdx-(t._midIdx-i);n<0;)n+=t._dataLen;for(;n>t._dataLen-1;)n-=t._dataLen;t._refreshCall&&t._refreshCall.call(t._target,e,n,n===t._curIdx)})},e.ITEM_REFRESH="LoopList-itemRefresh",r([u({type:cc.Enum(a),tooltip:!1})],e.prototype,"templateType",void 0),r([u({type:cc.Prefab,tooltip:!1,visible:function(){return this.templateType===a.PREFAB}})],e.prototype,"templatePrefab",void 0),r([u({type:cc.Node,tooltip:!1,visible:function(){return this.templateType===a.NODE}})],e.prototype,"templateNode",void 0),r([l,h,p(cc.PageView),f("Framework/UI\u7ec4\u4ef6/LoopList")],e)}(cc.Component);i.default=d,cc._RF.pop()},{"../../../util/Res":"Res"}],Main:[function(t,e,i){"use strict";cc._RF.push(e,"eef8c5qJslOQ71iswi/FuxY","Main");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../common/cmpt/base/Layer"),s=t("../../common/const/Url"),c=t("../../manager/DataManager"),l=cc._decorator,u=l.ccclass,p=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){c.DataManager.instance.init(),a.default.inst.enterMain(s.ResUrl.PREFAB.HOME)},r([u],e)}(cc.Component));i.default=p,cc._RF.pop()},{"../../common/cmpt/base/Layer":"Layer","../../common/const/Url":"Url","../../manager/DataManager":"DataManager"}],MargeAnim:[function(t,e,i){"use strict";cc._RF.push(e,"307cfVJxhZMSI/5WgPNw99g","MargeAnim");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},a=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var c=t("../../../game/BuildsInfo"),l=t("../../util/Res"),u=cc._decorator,p=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.left=null,e.right=null,e.icon=null,e}return o(e,t),e.prototype.init=function(t,e,i){return a(this,void 0,void 0,function(){var n,o,r,a;return s(this,function(s){switch(s.label){case 0:return this._callBack=e,this._target=i,n=new c.BuildsInfo(t),o=new c.BuildsInfo(t-1),[4,l.default.load("builds/"+o.img,cc.SpriteFrame)];case 1:return r=s.sent(),this.left.spriteFrame=r,this.right.spriteFrame=r,[4,l.default.load("builds/"+n.img,cc.SpriteFrame)];case 2:return a=s.sent(),this.icon.spriteFrame=a,this.play(),[2]}})})},e.prototype.play=function(){var t=this;this.stop(),this.icon.node.active=!1,this.left.node.active=!0,this.right.node.active=!0,cc.tween(this.left.node).to(.2,{opacity:255}).to(.1,{scale:1.2}).to(.1,{scale:1}).delay(.2).to(.3,{x:-160}).to(.3,{x:0}).start(),cc.tween(this.right.node).delay(.2).to(.2,{opacity:255}).to(.1,{scale:1.2}).to(.1,{scale:1}).to(.3,{x:160}).to(.3,{x:0}).call(function(){t.left.node.active=!1,t.right.node.active=!1,t.anim.node.active=!0,t.anim.play(),t.scheduleOnce(function(){t.icon.node.active=!0,t._callBack&&(t._target?t._callBack.call(t._target):t._callBack())},.3)}).start()},e.prototype.stop=function(){this.icon.node.active=!0,this.anim.node.active=!1,this.left.node.stopAllActions(),this.right.node.stopAllActions(),this.left.node.active=!1,this.left.node.scale=1,this.left.node.opacity=0,this.left.node.x=-120,this.right.node.active=!1,this.right.node.scale=1,this.right.node.opacity=0,this.right.node.x=120},r([h(cc.Animation)],e.prototype,"anim",void 0),r([h(cc.Sprite)],e.prototype,"left",void 0),r([h(cc.Sprite)],e.prototype,"right",void 0),r([h(cc.Sprite)],e.prototype,"icon",void 0),r([p],e)}(cc.Component);i.default=f,cc._RF.pop()},{"../../../game/BuildsInfo":"BuildsInfo","../../util/Res":"Res"}],MultiAssemblerBarFilled:[function(t,e,i){"use strict";cc._RF.push(e,"0d306+qdllOJo+T76peVXVI","MultiAssemblerBarFilled");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.updateRenderData=function(t){var e=t._spriteFrame;if(this.packToDynamicAtlas(t,e),t._vertsDirty){var i=t._fillStart,n=t._fillRange;n<0&&(i+=n,n=-n),n=(n=(n=i+n)>1?1:n)<0?0:n;var o=(i=(i=i>1?1:i)<0?0:i)+(n=(n-=i)<0?0:n);o=o>1?1:o,this.updateUVs(t,i,o),this.updateVerts(t,i,o),this.updateTextureIdx(t),t._vertsDirty=!1}},e.prototype.updateUVs=function(t,e,i){var n,o,r,a,s,c,l,u,p,h,f=t._spriteFrame,d=f._texture.width,_=f._texture.height,y=f._rect;f._rotated?(n=y.x/d,o=(y.y+y.width)/_,r=s=n,l=p=(y.x+y.height)/d,c=h=o,a=u=y.y/_):(n=y.x/d,o=(y.y+y.height)/_,r=l=n,s=p=(y.x+y.width)/d,a=c=o,u=h=y.y/_);var m=this._renderData.vDatas[0],g=this.uvOffset,v=this.floatsPerVert;switch(t._fillType){case cc.Sprite.FillType.HORIZONTAL:m[g]=r+(s-r)*e,m[g+1]=a+(c-a)*e,m[g+v]=r+(s-r)*i,m[g+v+1]=a+(c-a)*i,m[g+2*v]=l+(p-l)*e,m[g+2*v+1]=u+(h-u)*e,m[g+3*v]=l+(p-l)*i,m[g+3*v+1]=u+(h-u)*i;break;case cc.Sprite.FillType.VERTICAL:m[g]=r+(l-r)*e,m[g+1]=a+(u-a)*e,m[g+v]=s+(p-s)*e,m[g+v+1]=c+(h-c)*e,m[g+2*v]=r+(l-r)*i,m[g+2*v+1]=a+(u-a)*i,m[g+3*v]=s+(p-s)*i,m[g+3*v+1]=c+(h-c)*i;break;default:cc.errorID(2626)}},e.prototype.updateVerts=function(t,e,i){var n,o=t.node,r=o.width,a=o.height,s=o.anchorX*r,c=o.anchorY*a,l=-s,u=-c,p=r-s,h=a-c;switch(t._fillType){case cc.Sprite.FillType.HORIZONTAL:n=l+(p-l)*i,l+=(p-l)*e,p=n;break;case cc.Sprite.FillType.VERTICAL:n=u+(h-u)*i,u+=(h-u)*e,h=n;break;default:cc.errorID(2626)}var f=this._local;f[0]=l,f[1]=u,f[2]=p,f[3]=h,this.updateWorldVerts(t)},e}(t("./MultiAssembler").default);i.default=r,cc._RF.pop()},{"./MultiAssembler":"MultiAssembler"}],MultiAssemblerRadialFilled:[function(t,e,i){"use strict";cc._RF.push(e,"37463cgERBLhI8K7rCWzz1m","MultiAssemblerRadialFilled");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=t("./MultiAssembler"),a=2*Math.PI,s=[cc.v2(0,0),cc.v2(0,0),cc.v2(0,0),cc.v2(0,0)],c=[0,0,0,0],l=[0,0,0,0,0,0,0,0],u=[cc.v2(0,0),cc.v2(0,0),cc.v2(0,0),cc.v2(0,0)],p=[cc.v2(0,0),cc.v2(0,0),cc.v2(0,0),cc.v2(0,0)],h=cc.v2(0,0),f=[];function d(t,e,i,n,o,r,a){var s,c,l=Math.sin(r),u=Math.cos(r);if(0!==Math.cos(r)){if(s=l/u,(t-o.x)*u>0){var p=o.y+s*(t-o.x);a[0].x=t,a[0].y=p}if((e-o.x)*u>0){var h=o.y+s*(e-o.x);a[2].x=e,a[2].y=h}}if(0!==Math.sin(r)){if(c=u/l,(n-o.y)*l>0){var f=o.x+c*(n-o.y);a[3].x=f,a[3].y=n}if((i-o.y)*l>0){var d=o.x+c*(i-o.y);a[1].x=d,a[1].y=i}}}function _(t){var e=t.node,i=e.width,n=e.height,o=e.anchorX*i,r=e.anchorY*n,a=-o,l=-r,u=i-o,p=n-r,d=c;d[0]=a,d[1]=l,d[2]=u,d[3]=p;var _=t._fillCenter,y=h.x=Math.min(Math.max(0,_.x),1)*(u-a)+a,m=h.y=Math.min(Math.max(0,_.y),1)*(p-l)+l;s[0].x=s[3].x=a,s[1].x=s[2].x=u,s[0].y=s[1].y=l,s[2].y=s[3].y=p,f.length=0,y!==d[0]&&(f[0]=[3,0]),y!==d[2]&&(f[2]=[1,2]),m!==d[1]&&(f[1]=[0,1]),m!==d[3]&&(f[3]=[2,3])}function y(t,e){var i,n;if(i=e.x-t.x,n=e.y-t.y,0!==i||0!==n){if(0===i)return n>0?.5*Math.PI:1.5*Math.PI;var o=Math.atan(n/i);return i<0&&(o+=Math.PI),o}}var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initData=function(){this._renderData.createFlexData(0,4,6,this.getVfmt()),this.updateIndices()},e.prototype.updateRenderData=function(t){var e,i,n,o,r,s,f,y,m,g=t.spriteFrame;if(this.packToDynamicAtlas(t,g),t._vertsDirty){var v=t._fillStart,b=t._fillRange;for(b<0&&(v+=b,b=-b);v>=1;)v-=1;for(;v<0;)v+=1;v*=a,b*=a,_(t),s=(e=g)._texture.width,f=e._texture.height,y=e._rect,m=l,e._rotated?(i=y.x/s,n=(y.x+y.height)/s,o=y.y/f,r=(y.y+y.width)/f,m[0]=m[2]=i,m[4]=m[6]=n,m[3]=m[7]=r,m[1]=m[5]=o):(i=y.x/s,n=(y.x+y.width)/s,o=y.y/f,r=(y.y+y.height)/f,m[0]=m[4]=i,m[2]=m[6]=n,m[1]=m[3]=r,m[5]=m[7]=o),d(c[0],c[2],c[1],c[3],h,v,u),d(c[0],c[2],c[1],c[3],h,v+b,p),this.updateVerts(t,v,b),this.updateTextureIdx(t),t._vertsDirty=!1}},e.prototype.updateVerts=function(t,e,i){var n=e+i,o=this._local;o.length=0;for(var r=0,c=3*this.floatsPerVert,l=0;l<4;++l){var d=f[l];if(d)if(i>=a)o.length=r+c,this._generateTriangle(o,r,h,s[d[0]],s[d[1]]),r+=c;else{var _=y(h,s[d[0]]),m=y(h,s[d[1]]);m<_&&(m+=a),_-=a,m-=a;for(var g=0;g<3;++g)_>=n||(_>=e?(o.length=r+c,m>=n?this._generateTriangle(o,r,h,s[d[0]],p[l]):this._generateTriangle(o,r,h,s[d[0]],s[d[1]]),r+=c):m<=e||(m<=n?(o.length=r+c,this._generateTriangle(o,r,h,u[l],s[d[1]]),r+=c):(o.length=r+c,this._generateTriangle(o,r,h,u[l],p[l]),r+=c))),_+=a,m+=a}}this.allocWorldVerts(t),this.updateWorldVerts(t)},e.prototype.allocWorldVerts=function(t){var e=t.node._color._val,i=this._renderData,n=this.floatsPerVert,o=this._local,r=o.length/n;this.verticesCount=this.indicesCount=r;var a=i._flexBuffer;a.reserve(r,r)&&this.updateIndices(),a.used(this.verticesCount,this.indicesCount);for(var s=i.vDatas[0],c=i.uintVDatas[0],l=this.uvOffset,u=0;u<o.length;u+=n){var p=u+l;s[p]=o[p],s[p+1]=o[p+1],c[p+2]=e}},e.prototype.updateIndices=function(){for(var t=this._renderData.iDatas[0],e=0;e<t.length;e++)t[e]=e},e.prototype.updateWorldVerts=function(t){for(var e=t.node._worldMatrix.m,i=e[0],n=e[1],o=e[4],r=e[5],a=e[12],s=e[13],c=this._local,l=this._renderData.vDatas[0],u=this.floatsPerVert,p=0;p<c.length;p+=u){var h=c[p],f=c[p+1];l[p]=h*i+f*o+a,l[p+1]=h*n+f*r+s}},e.prototype._generateTriangle=function(t,e,i,n,o){var r=c,a=r[0],s=r[1],l=r[2],u=r[3],p=this.floatsPerVert;t[e]=i.x,t[e+1]=i.y,t[e+p]=n.x,t[e+p+1]=n.y,t[e+2*p]=o.x,t[e+2*p+1]=o.y;var h,f,d=this.uvOffset;h=(i.x-a)/(l-a),f=(i.y-s)/(u-s),this._generateUV(h,f,t,e+d),h=(n.x-a)/(l-a),f=(n.y-s)/(u-s),this._generateUV(h,f,t,e+p+d),h=(o.x-a)/(l-a),f=(o.y-s)/(u-s),this._generateUV(h,f,t,e+2*p+d)},e.prototype._generateUV=function(t,e,i,n){var o=l[0]+(l[2]-l[0])*t,r=l[4]+(l[6]-l[4])*t,a=l[1]+(l[3]-l[1])*t,s=l[5]+(l[7]-l[5])*t;i[n]=o+(r-o)*e,i[n+1]=a+(s-a)*e},e}(r.default);i.default=m,cc._RF.pop()},{"./MultiAssembler":"MultiAssembler"}],MultiAssemblerSimple:[function(t,e,i){"use strict";cc._RF.push(e,"aa9e0lVvBJP9I4EFlhtYCJc","MultiAssemblerSimple");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.updateRenderData=function(t){this.packToDynamicAtlas(t,t._spriteFrame),t._vertsDirty&&(this.updateUVs(t),this.updateVerts(t),this.updateTextureIdx(t),t._vertsDirty=!1)},e.prototype.updateUVs=function(t){for(var e=t._spriteFrame.uv,i=this.uvOffset,n=this.floatsPerVert,o=this._renderData.vDatas[0],r=0;r<4;r++){var a=2*r,s=n*r+i;o[s]=e[a],o[s+1]=e[a+1]}},e.prototype.updateVerts=function(t){var e,i,n,o,r=t.node,a=r.width,s=r.height,c=r.anchorX*a,l=r.anchorY*s;if(t.trim)e=-c,i=-l,n=a-c,o=s-l;else{var u=t.spriteFrame,p=u._originalSize.width,h=u._originalSize.height,f=u._rect.width,d=u._rect.height,_=u._offset,y=a/p,m=s/h,g=_.x+(p-f)/2,v=_.x-(p-f)/2;e=g*y-c,i=(_.y+(h-d)/2)*m-l,n=a+v*y-c,o=s+(_.y-(h-d)/2)*m-l}var b=this._local;b[0]=e,b[1]=i,b[2]=n,b[3]=o,this.updateWorldVerts(t)},e}(t("./MultiAssembler").default);i.default=r,cc._RF.pop()},{"./MultiAssembler":"MultiAssembler"}],MultiAssemblerSliced:[function(t,e,i){"use strict";cc._RF.push(e,"0f3a2cHs8tKfqzmBuX9KEnV","MultiAssemblerSliced");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initData=function(){if(this.verticesCount=16,this.indicesCount=54,!(this._renderData.meshCount>0)){this._renderData.createFlexData(0,this.verticesCount,this.indicesCount,this.getVfmt());for(var t=this._renderData.iDatas[0],e=0,i=0;i<3;++i)for(var n=0;n<3;++n){var o=4*i+n;t[e++]=o,t[e++]=o+1,t[e++]=o+4,t[e++]=o+1,t[e++]=o+5,t[e++]=o+4}}},e.prototype.initLocal=function(){this._local=[],this._local.length=8},e.prototype.updateRenderData=function(t){var e=t._spriteFrame;this.packToDynamicAtlas(t,e),t._vertsDirty&&(this.updateUVs(t),this.updateVerts(t),this.updateTextureIdx(t),t._vertsDirty=!1)},e.prototype.updateVerts=function(t){var e=t.node,i=e.width,n=e.height,o=e.anchorX*i,r=e.anchorY*n,a=t.spriteFrame,s=a.insetLeft,c=a.insetRight,l=a.insetTop,u=a.insetBottom,p=i-s-c,h=n-l-u,f=i/(s+c),d=n/(l+u);f=isNaN(f)||f>1?1:f,d=isNaN(d)||d>1?1:d,p=p<0?0:p,h=h<0?0:h;var _=this._local;_[0]=-o,_[1]=-r,_[2]=s*f-o,_[3]=u*d-r,_[4]=_[2]+p,_[5]=_[3]+h,_[6]=i-o,_[7]=n-r,this.updateWorldVerts(t)},e.prototype.updateUVs=function(t){for(var e=this._renderData.vDatas[0],i=t.spriteFrame.uvSliced,n=this.uvOffset,o=this.floatsPerVert,r=0;r<4;++r)for(var a=0;a<4;++a){var s=4*r+a,c=i[s],l=s*o;e[l+n]=c.u,e[l+n+1]=c.v}},e.prototype.updateWorldVerts=function(t){for(var e=t.node._worldMatrix.m,i=e[0],n=e[1],o=e[4],r=e[5],a=e[12],s=e[13],c=this._local,l=this._renderData.vDatas[0],u=this.floatsPerVert,p=0;p<4;++p)for(var h=c[2*p+1],f=0;f<4;++f){var d=c[2*f],_=(4*p+f)*u;l[_]=d*i+h*o+a,l[_+1]=d*n+h*r+s}},e}(t("./MultiAssembler").default);i.default=r,cc._RF.pop()},{"./MultiAssembler":"MultiAssembler"}],MultiAssemblerTiled:[function(t,e,i){"use strict";cc._RF.push(e,"825c0CUhQhLHIOj5ulatGUZ","MultiAssemblerTiled");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.contentWidth=0,e.contentHeight=0,e.rectWidth=0,e.rectHeight=0,e.hRepeat=0,e.vRepeat=0,e.row=0,e.col=0,e.sizableWidth=0,e.sizableHeight=0,e}return o(e,t),e.prototype.initData=function(){this.verticesCount=0,this.contentWidth=0,this.contentHeight=0,this.rectWidth=0,this.rectHeight=0,this.hRepeat=0,this.vRepeat=0,this.row=0,this.col=0,this._renderData.meshCount>0||(this._renderData.createFlexData(0,4,6,this.getVfmt()),this._updateIndices())},e.prototype.initLocal=function(){this._local={x:[],y:[]}},e.prototype._updateIndices=function(){for(var t=this._renderData.iDatas[0],e=0,i=0,n=t.length;e<n;e+=6,i+=4)t[e]=i,t[e+1]=i+1,t[e+2]=i+2,t[e+3]=i+1,t[e+4]=i+3,t[e+5]=i+2},e.prototype.updateRenderData=function(t){var e=t._spriteFrame;this.packToDynamicAtlas(t,e);var i=t.node,n=this.contentWidth=Math.abs(i.width),o=this.contentHeight=Math.abs(i.height),r=e._rect,a=e.insetLeft,s=e.insetRight,c=r.width-a-s,l=e.insetTop,u=e.insetBottom,p=r.height-l-u;this.sizableWidth=n-a-s,this.sizableHeight=o-l-u,this.sizableWidth=this.sizableWidth>0?this.sizableWidth:0,this.sizableHeight=this.sizableHeight>0?this.sizableHeight:0;var h=this.hRepeat=0===c?this.sizableWidth:this.sizableWidth/c,f=this.vRepeat=0===p?this.sizableHeight:this.sizableHeight/p,d=(this.row=Math.ceil(f+2))*(this.col=Math.ceil(h+2));this.verticesCount=4*d,this.indicesCount=6*d;var _=this._renderData._flexBuffer;_.reserve(this.verticesCount,this.indicesCount)&&(this._updateIndices(),this.updateColor(t)),_.used(this.verticesCount,this.indicesCount),t._vertsDirty&&(this.updateUVs(t),this.updateVerts(t),this.updateTextureIdx(t),t._vertsDirty=!1)},e.prototype.updateVerts=function(t){var e=t._spriteFrame,i=e._rect,n=t.node,o=n.anchorX*n.width,r=n.anchorY*n.height,a=this.row,s=this.col,c=this.contentWidth,l=this.contentHeight,u=this._local,p=u.x,h=u.y;p.length=h.length=0;var f,d,_=e.insetLeft,y=e.insetRight,m=i.width-_-y,g=e.insetTop,v=e.insetBottom,b=i.height-g-v,O=n.width/(_+y)>1?1:n.width/(_+y),M=n.height/(g+v)>1?1:n.height/(g+v);f=m>0?Math.floor(1e3*this.sizableWidth)/1e3%m==0?m:this.sizableWidth%m:this.sizableWidth,d=b>0?Math.floor(1e3*this.sizableHeight)/1e3%b==0?b:this.sizableHeight%b:this.sizableHeight;for(var w=0;w<=s;w++)0===w?p[w]=-o:w>0&&w<s?p[w]=1===w?_*O+Math.min(m,this.sizableWidth)-o:m>0?w===s-1?_+f+m*(w-2)-o:_+Math.min(m,this.sizableWidth)+m*(w-2)-o:_+this.sizableWidth-o:w===s&&(p[w]=Math.min(_+this.sizableWidth+y,c)-o);for(w=0;w<=a;w++)0===w?h[w]=-r:w>0&&w<a?h[w]=1===w?v*M+Math.min(b,this.sizableHeight)-r:b>0?w===a-1?v+d+(w-2)*b-r:v+Math.min(b,this.sizableHeight)+(w-2)*b-r:v+this.sizableHeight-r:w===a&&(h[w]=Math.min(v+this.sizableHeight+g,l)-r);this.updateWorldVerts(t)},e.prototype.updateWorldVerts=function(t){for(var e,i,n,o,r=this._renderData,a=this._local,s=a.x,c=a.y,l=r.vDatas[0],u=this.row,p=this.col,h=t.node._worldMatrix.m,f=h[0],d=h[1],_=h[4],y=h[5],m=h[12],g=h[13],v=this.floatsPerVert,b=0,O=0,M=u;O<M;++O){n=c[O],o=c[O+1];for(var w=0,T=p;w<T;++w)e=s[w],i=s[w+1],l[b]=e*f+n*_+m,l[b+1]=e*d+n*y+g,l[b+=v]=i*f+n*_+m,l[b+1]=i*d+n*y+g,l[b+=v]=e*f+o*_+m,l[b+1]=e*d+o*y+g,l[b+=v]=i*f+o*_+m,l[b+1]=i*d+o*y+g,b+=v}},e.prototype.updateUVs=function(t){var e=this._renderData.vDatas[0];if(e)for(var i=t._spriteFrame,n=i._rect,o=i.insetLeft,r=i.insetRight,a=n.width-o-r,s=i.insetTop,c=i.insetBottom,l=n.height-s-c,u=this.row,p=this.col,h=this.hRepeat,f=this.vRepeat,d=0,_=0,y=t.spriteFrame.uv,m=t.spriteFrame.uvSliced,g=t.spriteFrame._rotated,v=this.floatsPerVert,b=this.uvOffset,O=[],M=[],w=0,T=u;w<T;++w){_=this.sizableHeight>l?this.sizableHeight>=w*l?1:f%1:f;for(var P=0,x=p;P<x;++P)d=this.sizableWidth>a?this.sizableWidth>=P*a?1:h%1:h,g?(0===w?(O[0]=m[0].u,O[1]=m[0].u,O[2]=m[4].u+(m[8].u-m[4].u)*_):w<u-1?(O[0]=m[4].u,O[1]=m[4].u,O[2]=m[4].u+(m[8].u-m[4].u)*_):w===u-1&&(O[0]=m[8].u,O[1]=m[8].u,O[2]=m[12].u),0===P?(M[0]=m[0].v,M[1]=m[1].v+(m[2].v-m[1].v)*d,M[2]=m[0].v):P<p-1?(M[0]=m[1].v,M[1]=m[1].v+(m[2].v-m[1].v)*d,M[2]=m[1].v):P===p-1&&(M[0]=m[2].v,M[1]=m[3].v,M[2]=m[2].v),O[3]=O[2],M[3]=M[1]):(0===P?(O[0]=m[0].u,O[1]=m[1].u+(m[2].u-m[1].u)*d,O[2]=y[0]):P<p-1?(O[0]=m[1].u,O[1]=m[1].u+(m[2].u-m[1].u)*d,O[2]=m[1].u):P===p-1&&(O[0]=m[2].u,O[1]=m[3].u,O[2]=m[2].u),0===w?(M[0]=m[0].v,M[1]=m[0].v,M[2]=m[4].v+(m[8].v-m[4].v)*_):w<u-1?(M[0]=m[4].v,M[1]=m[4].v,M[2]=m[4].v+(m[8].v-m[4].v)*_):w===u-1&&(M[0]=m[8].v,M[1]=m[8].v,M[2]=m[12].v),O[3]=O[1],M[3]=M[2]),e[b]=O[0],e[b+1]=M[0],e[b+=v]=O[1],e[b+1]=M[1],e[b+=v]=O[2],e[b+1]=M[2],e[b+=v]=O[3],e[b+1]=M[3],b+=v}},e}(t("./MultiAssembler").default);i.default=r,cc._RF.pop()},{"./MultiAssembler":"MultiAssembler"}],MultiAssembler:[function(t,e,i){"use strict";cc._RF.push(e,"ac3d4pn45pPbIIUTWTJWqn4","MultiAssembler");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=cc.gfx,a=new r.VertexFormat([{name:r.ATTR_POSITION,type:r.ATTR_TYPE_FLOAT32,num:2},{name:r.ATTR_UV0,type:r.ATTR_TYPE_FLOAT32,num:2},{name:r.ATTR_COLOR,type:r.ATTR_TYPE_UINT8,num:4,normalize:!0},{name:"a_texture_idx",type:r.ATTR_TYPE_FLOAT32,num:1}]),s=function(t){function e(){var e=t.call(this)||this;return e.floatsPerVert=6,e.verticesCount=4,e.indicesCount=6,e.uvOffset=2,e.colorOffset=4,e.textureIdxOffset=5,e._renderData=null,e._local=[],e._renderData=new cc.RenderData,e._renderData.init(e),e.initData(),e.initLocal(),e}return o(e,t),Object.defineProperty(e.prototype,"verticesFloats",{get:function(){return this.verticesCount*this.floatsPerVert},enumerable:!1,configurable:!0}),e.prototype.initData=function(){var t=this._renderData;t.createFlexData(0,this.verticesCount,this.indicesCount,this.getVfmt());for(var e=t.iDatas[0],i=e.length/6,n=0,o=0;n<i;n++){var r=4*n;e[o++]=r,e[o++]=r+1,e[o++]=r+2,e[o++]=r+1,e[o++]=r+3,e[o++]=r+2}},e.prototype.initLocal=function(){this._local=[],this._local.length=4},e.prototype.getBuffer=function(){return cc.renderer._handle.getBuffer("mesh",this.getVfmt())},e.prototype.getVfmt=function(){return a},e.prototype.updateColor=function(t,e){var i=this._renderData.uintVDatas[0];if(i){e=null!=e?e:t.node.color._val;for(var n=this.floatsPerVert,o=this.colorOffset,r=i.length;o<r;o+=n)i[o]=e}},e.prototype.updateTextureIdx=function(t){for(var e=this._renderData.vDatas[0],i=0;i<this.verticesCount;i++)e[this.floatsPerVert*i+this.textureIdxOffset]=t.textureIdx},e.prototype.updateWorldVerts=function(t){var e=this._local,i=this._renderData.vDatas[0],n=t.node._worldMatrix.m,o=n[0],r=n[1],a=n[4],s=n[5],c=n[12],l=n[13],u=e[0],p=e[2],h=e[1],f=e[3],d=this.floatsPerVert,_=0;if(1===o&&0===r&&0===a&&1===s)i[_]=u+c,i[_+1]=h+l,i[_+=d]=p+c,i[_+1]=h+l,i[_+=d]=u+c,i[_+1]=f+l,i[_+=d]=p+c,i[_+1]=f+l;else{var y=o*u,m=o*p,g=r*u,v=r*p,b=a*h,O=a*f,M=s*h,w=s*f;i[_]=y+b+c,i[_+1]=g+M+l,i[_+=d]=m+b+c,i[_+1]=v+M+l,i[_+=d]=y+O+c,i[_+1]=g+w+l,i[_+=d]=m+O+c,i[_+1]=v+w+l}},e.prototype.fillBuffers=function(t,e){e.worldMatDirty&&this.updateWorldVerts(t);var i=this._renderData,n=i.vDatas[0],o=i.iDatas[0],r=this.getBuffer(e),a=r.request(this.verticesCount,this.indicesCount),s=a.byteOffset>>2,c=r._vData;n.length+s>c.length?c.set(n.subarray(0,c.length-s),s):c.set(n,s);for(var l=r._iData,u=a.indiceOffset,p=a.vertexOffset,h=0,f=o.length;h<f;h++)l[u++]=p+o[h]},e.prototype.packToDynamicAtlas=function(t,e){if(!e._original&&cc.dynamicAtlasManager&&e._texture.packable){var i=cc.dynamicAtlasManager.insertSpriteFrame(e);i&&e._setDynamicAtlasFrame(i)}var n=t._materials[0];n&&n.getProperty("texture")!==e._texture._texture&&(t._vertsDirty=!0,t._updateMaterial())},e}(cc.Assembler);i.default=s,cc._RF.pop()},{}],MultiSprite:[function(t,e,i){"use strict";cc._RF.push(e,"c922bwmEw5OV4VVCBcsN/cG","MultiSprite");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../../util/EditorTool"),s=t("./assembler/MultiAssemblerBarFilled"),c=t("./assembler/MultiAssemblerRadialFilled"),l=t("./assembler/MultiAssemblerSimple"),u=t("./assembler/MultiAssemblerSliced"),p=t("./assembler/MultiAssemblerTiled"),h=t("./MultiTextureManager"),f=cc._decorator,d=f.ccclass,_=(f.property,f.requireComponent,f.menu),y=f.inspector,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._textureIdx=0,e}return o(e,t),Object.defineProperty(e.prototype,"textureIdx",{get:function(){return this._textureIdx},set:function(t){this._textureIdx=cc.misc.clampf(t,0,h.MultiTextureManager.MAX_TEXTURE_NUM-1),this.setVertsDirty()},enumerable:!1,configurable:!0}),e.prototype.resetInEditor=function(){var t=this;a.default.load("res/shader/materials/multiTexture.mtl").then(function(e){e&&t.setMaterial(0,e)})},e.prototype.onLoad=function(){var e;null===(e=t.prototype.onLoad)||void 0===e||e.call(this),h.MultiTextureManager.addSprite(this)},e.prototype.onDestroy=function(){var e;null===(e=t.prototype.onDestroy)||void 0===e||e.call(this),h.MultiTextureManager.removeSprite(this)},e.prototype._updateMaterial=function(){var t=this.getMaterial(0);if(t){var e=null,i=null;if(this.spriteFrame&&(i=(e=this.spriteFrame.getTexture())&&e.getImpl()),t.name.indexOf("multiTexture")>=0){h.MultiTextureManager.init(t._material);var n=h.MultiTextureManager.getIdx(e);n>=0&&(this.textureIdx=n),t.getProperty("texture"+this.textureIdx,0)!==i&&t.setProperty("texture"+this.textureIdx,e)}else t.getProperty("texture",0)!==i&&t.setProperty("texture",e)}cc.BlendFunc.prototype._updateMaterial.call(this)},r([d,_("Framework/UI\u7ec4\u4ef6/MultiSprite"),y("packages://inspector/inspectors/comps/sprite.js")],e)}(cc.Sprite);i.default=m,cc.Assembler.register(m,{getConstructor:function(t){var e=l.default;switch(t.type){case cc.Sprite.Type.SLICED:e=u.default;break;case cc.Sprite.Type.TILED:e=p.default;break;case cc.Sprite.Type.FILLED:e=t._fillType===cc.Sprite.FillType.RADIAL?c.default:s.default}return e}}),cc._RF.pop()},{"../../../util/EditorTool":"EditorTool","./MultiTextureManager":"MultiTextureManager","./assembler/MultiAssemblerBarFilled":"MultiAssemblerBarFilled","./assembler/MultiAssemblerRadialFilled":"MultiAssemblerRadialFilled","./assembler/MultiAssemblerSimple":"MultiAssemblerSimple","./assembler/MultiAssemblerSliced":"MultiAssemblerSliced","./assembler/MultiAssemblerTiled":"MultiAssemblerTiled"}],MultiTextureManager:[function(t,e,i){"use strict";cc._RF.push(e,"4fc9cgEvWxKZK0hYF2jjQq7","MultiTextureManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.MultiTextureManager=void 0;var n=function(){function t(){}return t.init=function(t){this._init||!(t instanceof cc.Material)||t instanceof cc.MaterialVariant||(this._init=!0,this._mat=t,this._mat.addRef())},t.addSprite=function(t){this._sprites.add(t)},t.removeSprite=function(t){this._sprites.delete(t)},t.setTexture=function(e,i){var n=this;if(this._init)if(i instanceof cc.Texture2D){e=cc.misc.clampf(e,0,t.MAX_TEXTURE_NUM-1);var o=this._texMap.get(e);o!==i&&(o&&o.decRef(),i.addRef(),this._texMap.set(e,i),this._mat.setProperty("texture"+e,i),this._sprites.forEach(function(e){for(var i=e.getMaterial(0),o=0;o<t.MAX_TEXTURE_NUM;o++){var r=n._texMap.get(o);if(r){var a=r.getImpl();i.getProperty("texture"+o,0)!==a&&i.setProperty("texture"+o,r)}}i._effect._dirty=!0,e._updateMaterial()}))}else cc.error("[MultiSpriteManager.setTexture] \u53c2\u6570\u7c7b\u578b\u9519\u8bef");else cc.error("[MultiSpriteManager.setTexture] \u672a\u521d\u59cb\u5316MultiSpriteManager")},t.getIdx=function(e){if(this._init){for(var i=0;i<t.MAX_TEXTURE_NUM;i++)if(this._texMap.get(i)===e||this._mat.getProperty("texture"+i,0)===e.getImpl())return i;return-1}cc.error("[MultiSpriteManager.getIdx] \u672a\u521d\u59cb\u5316MultiSpriteManager")},t.MAX_TEXTURE_NUM=8,t._init=!1,t._mat=null,t._texMap=new Map,t._sprites=new Set,t}();i.MultiTextureManager=n,cc._RF.pop()},{}],Random:[function(t,e,i){"use strict";cc._RF.push(e,"67025YgSQdGQ6vst9yFrddx","Random"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Tool"),o=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r=function(){function t(){}return t.hashCode=function(t,e){void 0===e&&(e=0);var i=e;if(!t)return i;for(var n=0;n<t.length;n++)i=(131*i+t.charCodeAt(n))%19260817;return i},t.getSeed=function(t){void 0===t&&(t=8);for(var e="",i=0;i<t;i++)e+=n.default.arrayRand(o);return e},t.random=function(t){return(9301*("string"==typeof t?this.hashCode(t):t)+49297)%233280/233280},t.int=function(t,e,i){return void 0===i&&(i=void 0),void 0===i&&(i=e,e=0),e=Math.ceil(e),i=Math.floor(i),Math.floor(this.random(t)*(i-e))+e},t.float=function(t,e,i){return void 0===i&&(i=void 0),void 0===i&&(i=e,e=0),this.random(t)*(i-e)+e},t.randWeightIdx=function(t,e){for(var i=0,n=0;n<e.length;n++)i+=e[n];var o=this.float(t,0,i),r=0;for(n=0;n<e.length;n++)if(o<(r+=e[n]))return n;return e.length-1},t.shuffle=function(t,e){for(var i,n=e.length-1;n>=0;n--){var o=Math.floor(this.random(t)*(n+1));i=[e[n],e[o]],e[o]=i[0],e[n]=i[1]}return e},t.arrayRand=function(t,e){return e.length<=0?null:e[this.int(t,0,e.length)]},t}();i.default=r,cc._RF.pop()},{"./Tool":"Tool"}],RecyclePool:[function(t,e,i){"use strict";cc._RF.push(e,"a65467UylROdo6A5J2HqlLb","RecyclePool"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.size=function(t){var e="string"==typeof t?this._urlMap.get(t):this._cmptMap.get(t);return void 0===e?0:e.length},t.clear=function(t){if("string"==typeof t){if(void 0===(n=this._urlMap.get(t)))return;for(var e=n.length,i=0;i<e;++i)n[i].destroy();n.length=0,this._urlMap.delete(t)}else{var n;if(void 0===(n=this._cmptMap.get(t)))return;for(e=n.length,i=0;i<e;++i)n[i].destroy();n.length=0,this._cmptMap.delete(t)}},t.clearAll=function(){this._urlMap.forEach(function(t){for(var e=t.length,i=0;i<e;++i)t[i].destroy()}),this._urlMap.clear(),this._cmptMap.forEach(function(t){for(var e=t.length,i=0;i<e;++i)t[i].destroy()}),this._cmptMap.clear()},t.get=function(t){if("string"==typeof t){if(void 0===(i=this._urlMap.get(t))||i.length<=0)return null;var e=i[n=i.length-1];return i.length=n,e}var i,n;if(void 0===(i=this._cmptMap.get(t))||i.length<=0)return null;e=i[n=i.length-1],i.length=n;var o=e.getComponent(t);return o&&o.reuse&&o.reuse(),e},t.put=function(e,i){if(i)if("string"==typeof e){if(void 0===(n=this._urlMap.get(e)))n=[],this._urlMap.set(e,n);else{if(-1!==n.indexOf(i))return void cc.error("[RecyclePool.put] error: \u4e0d\u53ef\u5c06\u8282\u70b9\u91cd\u590d\u653e\u5165\u8282\u70b9\u6c60\u4e2d");if(n.length>=t.limit)return i.destroy(),void cc.warn("[RecyclePool.put] warn: \u8282\u70b9\u6c60\u5230\u8fbe\u6700\u5927\u6570\u91cf key: "+e)}i.removeFromParent(!1),n.push(i)}else{var n;if(void 0===(n=this._cmptMap.get(e)))n=[],this._cmptMap.set(e,n);else{if(-1!==n.indexOf(i))return void cc.error("[RecyclePool.put] error: \u4e0d\u53ef\u5c06\u8282\u70b9\u91cd\u590d\u653e\u5165\u8282\u70b9\u6c60\u4e2d");if(n.length>=t.limit)return i.destroy(),void cc.warn("[RecyclePool.put] warn: \u8282\u70b9\u6c60\u5230\u8fbe\u6700\u5927\u6570\u91cf key: "+e)}i.removeFromParent(!1);var o=i.getComponent(e);o&&o.unuse&&o.unuse(),n.push(i)}else cc.error("[RecyclePool.put] error: \u4f20\u5165\u8282\u70b9\u4e3a\u7a7a")},t._urlMap=new Map,t._cmptMap=new Map,t.limit=512,t}();i.default=n,cc._RF.pop()},{}],ResSprite:[function(t,e,i){"use strict";cc._RF.push(e,"1e608kcfHNDl6sxF57wMNFE","ResSprite");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},a=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var c=t("../../../util/Res"),l=cc._decorator,u=l.ccclass,p=l.menu,h=l.disallowMultiple,f=l.requireComponent,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._asset=null,e._sprite=null,e}return o(e,t),Object.defineProperty(e.prototype,"sprite",{get:function(){return this._sprite||(this._sprite=this.getComponent(cc.Sprite)),this._sprite},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spriteFrame",{get:function(){return this.sprite.spriteFrame},set:function(t){var e;this.sprite.spriteFrame!==t&&(t.addRef(),null===(e=this._asset)||void 0===e||e.decRef(),this._asset=t,this.sprite.spriteFrame=t)},enumerable:!1,configurable:!0}),e.prototype.onDestroy=function(){var t;null===(t=this._asset)||void 0===t||t.decRef()},e.prototype.setSpriteFrame=function(t,e){return void 0===e&&(e=""),a(this,void 0,Promise,function(){var i,n,o;return s(this,function(r){switch(r.label){case 0:return i=e?cc.SpriteAtlas:cc.SpriteFrame,(o=c.default.get(t,i))?[3,2]:[4,c.default.load(t,i)];case 1:o=r.sent(),r.label=2;case 2:return(n=o)instanceof i&&(this.spriteFrame=n instanceof cc.SpriteAtlas?n.getSpriteFrame(e):n),[2]}})})},r([u,h,f(cc.Sprite),p("Framework/UI\u7ec4\u4ef6/ResSprite")],e)}(cc.Component);i.default=d,cc._RF.pop()},{"../../../util/Res":"Res"}],Res:[function(t,e,i){"use strict";cc._RF.push(e,"e6bb4ug0+BII76RLebcZhXt","Res");var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function t(){}return t.parseUrl=function(t){if(t.startsWith("ab:")){var e=t.substring("ab:".length),i=e.indexOf("/");return{bundle:e.substring(0,i),loadUrl:e=e.substring(i+1)}}return{loadUrl:t}},t.getCachePrefabUrl=function(t){var e="";if(t instanceof cc.Node)for(var i=t;i&&!(i._prefab&&i._prefab.root&&(e=this._nodePath.get(i._prefab.root)||""));)i=i.parent;else t instanceof cc.Prefab&&(e=this._prefabPath.get(t)||"");return e},t.cacheAsset=function(t,e,i){var n=this;if(void 0===i&&(i=!0),e){var o=function(o){if(!o.has(t)){e.addRef(),e instanceof cc.Prefab&&n._prefabPath.set(e,t);var r={asset:e,release:i,lastLoadTime:Date.now()/1e3};o.set(t,r)}};if(e instanceof cc.Prefab)o(this._prefabCache);else if(e instanceof cc.SpriteFrame)o(this._spriteFrameCache);else if(e instanceof cc.SpriteAtlas)o(this._spriteAtlasCache);else if(e instanceof sp.SkeletonData)o(this._skeletonDataCache);else{if(this._otherCache.has(t))return;e.addRef(),this._otherCache.set(t,e)}}},t.get=function(t,e){var i=null,n=function(e){var n=e.get(t);n&&(i=n.asset,n.lastLoadTime=Date.now()/1e3)};return e===cc.Prefab?n(this._prefabCache):e===cc.SpriteFrame?n(this._spriteFrameCache):e===cc.SpriteAtlas?n(this._spriteAtlasCache):e===sp.SkeletonData?n(this._skeletonDataCache):i=this._otherCache.get(t),i},t.loadBundle=function(t){return new Promise(function(e){cc.assetManager.loadBundle(t,function(t,i){t?(cc.error("[Res.loadBundle] error: "+t),e(null)):e(i)})})},t.load=function(t,e,i){return void 0===i&&(i=!0),n(this,void 0,Promise,function(){var n,r,a=this;return o(this,function(o){switch(o.label){case 0:return(n=this.get(t,e))?[2,n]:!(r=this.parseUrl(t)).bundle||cc.assetManager.getBundle(r.bundle)?[3,2]:[4,this.loadBundle(r.bundle)];case 1:o.sent(),o.label=2;case 2:return[4,new Promise(function(n){var o=r.bundle?cc.assetManager.getBundle(r.bundle):cc.resources;if(!o)return cc.error("[Res.load] cant find bundle: "+t),void n(null);o.load(r.loadUrl,e,function(e,o){e?(cc.error("[Res.load] load error: "+e),n(null)):(a.cacheAsset(t,o,i),n(o))})})];case 3:return[2,n=o.sent()]}})})},t.loadDir=function(t,e,i){return void 0===i&&(i=!0),n(this,void 0,Promise,function(){var n,r=this;return o(this,function(o){switch(o.label){case 0:return!(n=this.parseUrl(t)).bundle||cc.assetManager.getBundle(n.bundle)?[3,2]:[4,this.loadBundle(n.bundle)];case 1:o.sent(),o.label=2;case 2:return[2,new Promise(function(o){var a=n.bundle?cc.assetManager.getBundle(n.bundle):cc.resources;if(!a)return cc.error("[Res.loadDir] cant find bundle: "+t),void o(null);a.loadDir(n.loadUrl,e,function(n,s){if(n)cc.error("[Res.loadDir] load error: "+n),o([]);else{var c=a.getDirWithPath(t,e);s.forEach(function(t,e){r.cacheAsset(c[e].path,t,i)}),o(s)}})})]}})})},t.instantiate=function(t,e){if(!t)return cc.error("[Res.instantiate] original is null"),null;var i=cc.instantiate(t),n=this.getCachePrefabUrl(e)||this.getCachePrefabUrl(t);if(n){var o=this._prefabCache.get(n);o&&o.release&&(Array.isArray(o.nodes)||(o.nodes=[]),o.nodes.push(i),this._nodePath.set(i,n))}return i},t.releaseAll=function(){var t=this,e=Date.now()/1e3;this._prefabCache.forEach(function(i,n){if(i.release&&!(e-i.lastLoadTime<t.releaseSec)){if(Array.isArray(i.nodes)){for(var o=i.nodes.length-1;o>=0;o--){var r=i.nodes[o];r.isValid||(t._nodePath.delete(r),i.nodes.splice(o,1))}0===i.nodes.length&&delete i.nodes}Array.isArray(i.nodes)||(i.asset.decRef(),t._prefabPath.delete(i.asset),t._prefabCache.delete(n))}}),[this._spriteFrameCache,this._spriteAtlasCache,this._skeletonDataCache].forEach(function(i){i.forEach(function(n,o){!n.release||e-n.lastLoadTime<t.releaseSec||(n.asset.decRef(),i.delete(o))})})},t._nodePath=new Map,t._prefabPath=new Map,t._prefabCache=new Map,t._spriteFrameCache=new Map,t._spriteAtlasCache=new Map,t._skeletonDataCache=new Map,t._otherCache=new Map,t.releaseSec=0,t}();i.default=r,cc._RF.pop()},{}],ShaderFill:[function(t,e,i){"use strict";cc._RF.push(e,"63dfaBxVipD7bEv99K+9+0u","ShaderFill");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=a.menu,u=a.disallowMultiple,p=a.executeInEditMode,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fillColor=new cc.Color,e.fillPhase=0,e._mat=null,e}return o(e,t),Object.defineProperty(e.prototype,"mat",{get:function(){return this._mat||(this._mat=this.getComponent(cc.RenderComponent).getMaterial(0)),this._mat},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.updateShader()},e.prototype.update=function(){},e.prototype.updateShader=function(){this.mat.setProperty("fillColor",this.fillColor),this.mat.setProperty("fillPhase",this.fillPhase)},r([c({tooltip:!1})],e.prototype,"fillColor",void 0),r([c({tooltip:!1,range:[0,1]})],e.prototype,"fillPhase",void 0),r([s,u,p,l("Framework/Shader/ShaderFill")],e)}(cc.Component);i.default=h,cc._RF.pop()},{}],ShaderOutline:[function(t,e,i){"use strict";cc._RF.push(e,"d2a0bLIldJHoqHhJxTVBs5H","ShaderOutline");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a,s=cc._decorator,c=s.ccclass,l=s.property,u=s.menu,p=s.disallowMultiple,h=s.executeInEditMode;(function(t){t[t.NONE=0]="NONE",t[t.OUT=1]="OUT",t[t.INNER=2]="INNER"})(a||(a={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.outlineColor=new cc.Color,e.outLineWidth=0,e.outlineType=a.NONE,e.textureSize=new cc.Size(1,1),e._mat=null,e}return o(e,t),Object.defineProperty(e.prototype,"mat",{get:function(){return this._mat||(this._mat=this.getComponent(cc.RenderComponent).getMaterial(0)),this._mat},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.updateShader()},e.prototype.update=function(){},e.prototype.updateShader=function(){this.mat.setProperty("outlineColor",this.outlineColor),this.mat.setProperty("outlineInfo",new cc.Vec4(this.textureSize.width,this.textureSize.height,this.outLineWidth,this.outlineType))},r([l({tooltip:!1})],e.prototype,"outlineColor",void 0),r([l({tooltip:!1})],e.prototype,"outLineWidth",void 0),r([l({type:cc.Enum(a),tooltip:!1})],e.prototype,"outlineType",void 0),r([l({tooltip:!1})],e.prototype,"textureSize",void 0),r([c,p,h,u("Framework/Shader/ShaderOutline")],e)}(cc.Component);i.default=f,cc._RF.pop()},{}],ShaderShining:[function(t,e,i){"use strict";cc._RF.push(e,"10bd9Ws1BRG/ZPICDgLNLvK","ShaderShining");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../base/Timer"),s=cc._decorator,c=s.ccclass,l=s.property,u=s.menu,p=s.disallowMultiple,h=s.executeInEditMode,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=1,e.slope=1,e.len=.25,e.strength=2,e.interval=1,e.timeScale=!1,e._mat=null,e}return o(e,t),Object.defineProperty(e.prototype,"mat",{get:function(){return this._mat||(this._mat=this.getComponent(cc.RenderComponent).getMaterial(0)),this._mat},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.updateShader()},e.prototype.update=function(){this.updateShader()},e.prototype.updateShader=function(){this.mat.setProperty("shiningData",new cc.Vec4(this.speed,this.slope,this.len,this.interval)),this.mat.setProperty("extra",new cc.Vec4(this.timeScale?a.default.scaleGameSec:a.default.gameSec,this.strength))},r([l({tooltip:!1})],e.prototype,"speed",void 0),r([l({tooltip:!1})],e.prototype,"slope",void 0),r([l({tooltip:!1,range:[0,Number.MAX_SAFE_INTEGER]})],e.prototype,"len",void 0),r([l({tooltip:!1,range:[0,Number.MAX_SAFE_INTEGER]})],e.prototype,"strength",void 0),r([l({tooltip:!1,range:[0,Number.MAX_SAFE_INTEGER]})],e.prototype,"interval",void 0),r([l({tooltip:!1})],e.prototype,"timeScale",void 0),r([c,p,h,u("Framework/Shader/ShaderShining")],e)}(cc.Component);i.default=f,cc._RF.pop()},{"../base/Timer":"Timer"}],ShaderTile:[function(t,e,i){"use strict";cc._RF.push(e,"e6e3agdOnJF/o7rgEOg4Iq+","ShaderTile");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=a.menu,u=a.disallowMultiple,p=a.executeInEditMode,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scale=new cc.Vec2(1,1),e.offset=new cc.Vec2(0,0),e._mat=null,e}return o(e,t),Object.defineProperty(e.prototype,"mat",{get:function(){return this._mat||(this._mat=this.getComponent(cc.RenderComponent).getMaterial(0)),this._mat},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.updateShader()},e.prototype.update=function(){},e.prototype.updateShader=function(){this.mat.setProperty("tile",new cc.Vec4(this.scale.x,this.scale.y,this.offset.x,this.offset.y))},r([c({tooltip:!1})],e.prototype,"scale",void 0),r([c({tooltip:!1})],e.prototype,"offset",void 0),r([s,u,p,l("Framework/Shader/ShaderTile")],e)}(cc.Component);i.default=h,cc._RF.pop()},{}],ShakeNode:[function(t,e,i){"use strict";cc._RF.push(e,"936e8flAq9L248TlLh5Hzd0","ShakeNode");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../util/Tween"),s=cc._decorator,c=s.ccclass,l=s.property,u=s.menu,p=s.disallowMultiple,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shakePower=5,e.shakeTime=.16,e.timeScale=!1,e._tween=null,e}return o(e,t),e.prototype.shake=function(t){if(void 0===t&&(t=5),!(this._tween&&this._tween.isPlaying()||t<=0||this.shakePower<=0||this.shakeTime<=0)){var e=cc.v2(0,this.shakePower);this.node.setPosition(e);for(var i=[],n=[],o=1;o<=8;o++){var r=e.rotate(Math.PI/4*3*o);i.push(r.x),n.push(r.y)}this._tween=this.timeScale?new a.Tween(this.node,a.SCALE_TWEEN):new a.Tween(this.node),this._tween.to({x:i,y:n},1e3*this.shakeTime).repeat(t).start()}},r([l({tooltip:!1})],e.prototype,"shakePower",void 0),r([l({tooltip:!1})],e.prototype,"shakeTime",void 0),r([l({tooltip:!1})],e.prototype,"timeScale",void 0),r([c,p,u("Framework/UI\u7ec4\u4ef6/ShakeNode")],e)}(cc.Component);i.default=h,cc._RF.pop()},{"../../util/Tween":"Tween"}],SystemManager:[function(t,e,i){"use strict";cc._RF.push(e,"a812ee+01NLXJND+1nfzUIa","SystemManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.SystemType=i.SystemManager=void 0;var n=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.onMessage=function(){window.addEventListener("message",function(t){console.log("\u7236\u9875\u9762\u4f20\u8f93\u8fc7\u6765\u53c2\u6570"),console.log(t.data)})},t.prototype.sendMessage=function(t,e){window.parent.postMessage({type:t,data:e},"*")},t}();i.SystemManager=n,function(t){t.OpenPage="OpenPage",t.NewBuilds="NewBuilds"}(i.SystemType||(i.SystemType={})),cc._RF.pop()},{}],Timer:[function(t,e,i){"use strict";cc._RF.push(e,"435944whQBN4o91RvmJFpuA","Timer");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../const/EventName"),s=t("../../util/Events"),c=t("../../util/Tween"),l=cc._decorator,u=l.ccclass,p=l.executionOrder,h=l.menu,f=l.disallowMultiple;cc.director.on(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){if(!d.timer){cc.log("addPersistRootNode: TIMER");var t=new cc.Node("TIMER");cc.game.addPersistRootNode(t),t.addComponent(d)}});var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var i;return o(e,t),i=e,Object.defineProperty(e,"timer",{get:function(){return this._timer},enumerable:!1,configurable:!0}),Object.defineProperty(e,"timeScale",{get:function(){return this._timeScale},set:function(t){t===this._timeScale||t<0||(this._timeScale=t,s.default.emit(a.EventName.TIME_SCALE))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"realDt",{get:function(){return this._realDt},enumerable:!1,configurable:!0}),Object.defineProperty(e,"scaleDt",{get:function(){return this._realDt*this._timeScale},enumerable:!1,configurable:!0}),Object.defineProperty(e,"gameSec",{get:function(){return this._gameSec},enumerable:!1,configurable:!0}),Object.defineProperty(e,"gameMs",{get:function(){return 1e3*this._gameSec},enumerable:!1,configurable:!0}),Object.defineProperty(e,"scaleGameSec",{get:function(){return this._scaleGameSec},enumerable:!1,configurable:!0}),Object.defineProperty(e,"scaleGameMs",{get:function(){return 1e3*this._scaleGameSec},enumerable:!1,configurable:!0}),e.reset=function(){this._puaseCount=0,this._timeScale=1,this._lastTimeScale=1},e.gamePause=function(){this._puaseCount++,this._puaseCount>1||(this._lastTimeScale=this._timeScale,this._timeScale=0,s.default.emit(a.EventName.GAME_PAUSE))},e.gameResume=function(){this._puaseCount<=0||(this._puaseCount--,this._puaseCount<=0&&(this._timeScale=this._lastTimeScale,s.default.emit(a.EventName.GAME_RESUME)))},e.prototype.onLoad=function(){i._timer||(i._timer=this)},e.prototype.onDestroy=function(){i._timer===this&&(i._timer=null),c.TWEEN.removeAll(),c.SCALE_TWEEN.removeAll()},e.prototype.update=function(t){i._timer===this&&(i._realDt=t,i._gameSec+=t,i._scaleGameSec+=i.scaleDt,c.TWEEN.update(i.gameMs),i.scaleDt>0&&c.SCALE_TWEEN.update(i.scaleGameMs))},e._timer=null,e._puaseCount=0,e._lastTimeScale=1,e._timeScale=1,e._realDt=0,e._gameSec=0,e._scaleGameSec=0,i=r([u,f,p(-1e3),h("Framework/\u57fa\u7840\u7ec4\u4ef6/Timer")],e)}(cc.Component);i.default=d,cc._RF.pop()},{"../../const/EventName":"EventName","../../util/Events":"Events","../../util/Tween":"Tween"}],Tip:[function(t,e,i){"use strict";cc._RF.push(e,"86d61wcIsZPSrb29FvmFJRL","Tip");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=a.disallowMultiple,u=a.menu,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layout=null,e.textLab=null,e}return o(e,t),e.prototype.init=function(t){this.textLab.string=t,this.textLab._forceUpdateRenderData(),this.layout.updateLayout()},r([c(cc.Layout)],e.prototype,"layout",void 0),r([c(cc.Label)],e.prototype,"textLab",void 0),r([s,l,u("Framework/\u57fa\u7840\u7ec4\u4ef6/Tip")],e)}(cc.Component);i.default=p,cc._RF.pop()},{}],Tool:[function(t,e,i){"use strict";cc._RF.push(e,"8f0aaDZc6xBdrsOcvbGZFVC","Tool"),Object.defineProperty(i,"__esModule",{value:!0});var n,o=t("./Tween");(function(t){t[t.S=0]="S",t[t.M=1]="M",t[t.H=2]="H",t[t.D=3]="D"})(n||(n={}));var r=function(){function t(){}return t.deepCopy=function(t){if("object"!=typeof t||null===t||t instanceof RegExp)return t;var e=null;if(Array.isArray(t)){e=[];for(var i=0,n=t;i<n.length;i++){var o=n[i];e.push(this.deepCopy(o))}}else for(var r in e={},t)e[r]=this.deepCopy(t[r]);return e},t.wait=function(t){return new Promise(function(e){setTimeout(function(){e()},1e3*t)})},t.waitCmpt=function(t,e){return new Promise(function(i){t.scheduleOnce(function(){i()},e)})},t.waitTween=function(t,e,i){return void 0===i&&(i=o.TWEEN),new Promise(function(n){new o.Tween({k:0},i).to({k:1},1e3*e).onComplete(function(){n()}).start().bindCCObject(t)})},t.lerp=function(t,e,i,n){void 0===n&&(n=0),n=Math.abs(n);var o=e-t,r=o*i;return r=r<0?Math.min(r,-n):Math.max(r,n),Math.abs(r)>Math.abs(o)&&(r=o),t+r},t.calcTwoPointForm=function(t,e,i){return t.x===e.x?t.y:(e.y-t.y)*(i-t.x)/(e.x-t.x)+t.y},t.overlapRect=function(t,e){var i=Math.max(t.xMin,e.xMin),n=Math.min(t.xMax,e.xMax),o=Math.max(t.yMin,e.yMin),r=Math.min(t.yMax,e.yMax);return i>n||o>r?null:cc.rect(i,o,n-i,r-o)},t.normalizeDegree=function(t){var e=t%360;return e<0&&(e+=360),e},t.getEllipsePoint=function(t,e,i){i=this.normalizeDegree(i);var n=Math.tan(cc.misc.degreesToRadians(i)),o=Math.sqrt(e*e/(n*n+e*e/t/t));i>90&&i<270&&(o=-o);var r=Math.sqrt(e*e-e*e*o*o/t/t);return i>180&&(r=-r),cc.v2(o,r)},t.inRange=function(t,e,i,n){return void 0===n&&(n=!0),n?i>=t&&i<=e:i>t&&i<e},t.randInt=function(t,e){return void 0===e&&(e=void 0),void 0===e&&(e=t,t=0),t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t},t.randFloat=function(t,e){return void 0===e&&(e=void 0),void 0===e&&(e=t,t=0),Math.random()*(e-t)+t},t.randWeightIdx=function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i];var n=this.randFloat(0,e),o=0;for(i=0;i<t.length;i++)if(n<(o+=t[i]))return i;return t.length-1},t.shuffleString=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e=this.shuffle(e),t="",e.forEach(function(e){t+=e}),t},t.shuffle=function(t){for(var e,i=t.length-1;i>=0;i--){var n=Math.floor(Math.random()*(i+1));e=[t[i],t[n]],t[n]=e[0],t[i]=e[1]}return t},t.arrayRand=function(t){return t.length<=0?null:t[this.randInt(0,t.length)]},t.arrayHas=function(t,e){return("function"!=typeof e?t.findIndex(function(t){return t===e}):t.findIndex(e))>=0},t.arraySwap=function(t,e,i){var n;e!==i&&this.inRange(0,t.length-1,e)&&this.inRange(0,t.length-1,i)&&(n=[t[i],t[e]],t[e]=n[0],t[i]=n[1])},t.arrayMove=function(t,e,i){if(e!==i&&this.inRange(0,t.length-1,e)&&this.inRange(0,t.length-1,i)){var n=t.splice(e,1);t.splice(i,0,n[0])}},t.arrayAdd=function(t,e,i){return void 0===i&&(i=!1),!(!i&&this.arrayHas(t,e)||(t.push(e),0))},t.arrayDelete=function(t,e){var i=t.findIndex(function(t){return t===e});return i>=0&&(t.splice(i,1),!0)},t.formatString=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=t;if(1===e.length&&"[object Object]"===Object.prototype.toString.call(e[0])){for(var o in e[0])if(e[0].hasOwnProperty(o)){var r=new RegExp("%{"+o+"}","g");n=n.replace(r,""+e[0][o])}}else e.forEach(function(t){n=n.replace(/%\{.*?\}/,""+t)});return n},t.formatTimeString=function(t,e){void 0===e&&(e="%{hh}:%{mm}:%{ss}");var i=Math.floor(t),o=Math.floor(i/60),r=Math.floor(i/3600),a=Math.floor(i/86400),s=n.S,c="";"string"==typeof e?(c=e,/%\{d+\}/.test(e)?s=n.D:/%\{h+\}/.test(e)?s=n.H:/%\{m+\}/.test(e)&&(s=n.M)):a>0?(s=n.D,c=e.D):r>0?(s=n.H,c=e.H):o>0?(s=n.M,c=e.M):(s=n.S,c=e.S),s>n.S&&(i%=60),s>n.M&&(o%=60),s>n.H&&(r%=24);var l={dd:a<10?"0"+a:""+a,d:""+a,hh:r<10?"0"+r:""+r,h:""+r,mm:o<10?"0"+o:""+o,m:""+o,ss:i<10?"0"+i:""+i,s:""+i};return this.formatString(c,l)},t.formatDateString=function(t,e,i){void 0===e&&(e="%{YYYY}-%{MM}-%{dd} %{hh}:%{mm}:%{ss}"),void 0===i&&(i=!1);var n=t instanceof Date?t:new Date(t),o=i?n.getUTCFullYear():n.getFullYear(),r=i?n.getUTCMonth()+1:n.getMonth()+1,a=i?n.getUTCDate():n.getDate(),s=i?n.getUTCHours():n.getHours(),c=i?n.getUTCMinutes():n.getMinutes(),l=i?n.getUTCSeconds():n.getSeconds(),u={YYYY:""+o,YY:o%100<10?"0"+o%100:""+o%100,MM:r<10?"0"+r:""+r,M:""+r,dd:a<10?"0"+a:""+a,d:""+a,hh:s<10?"0"+s:""+s,h:""+s,mm:c<10?"0"+c:""+c,m:""+c,ss:l<10?"0"+l:""+l,s:""+l};return this.formatString(e,u)},t.nodeRecursive=function(t,e,i){var n=this;void 0===i&&(i=void 0),t instanceof cc.Node?(e.call(i,t),t.children.forEach(function(t){n.nodeRecursive(t,e,i)})):Array.isArray(t)&&t.forEach(function(t){n.nodeRecursive(t,e,i)})},t.clearChildren=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){t.destroyAllChildren(),t.removeAllChildren()})},t.isCoincide=function(t,e,i){void 0===i&&(i=!0);var n=i?t.convertToWorldSpaceAR(cc.v2(0,0)):t.getPosition(),o=i?e.convertToWorldSpaceAR(cc.v2(0,0)):e.getPosition(),r=Math.abs(t.scaleX*t.width),a=Math.abs(e.scaleX*e.width),s=Math.abs(t.scaleY*t.height),c=Math.abs(e.scaleY*e.height),l=new cc.Rect(n.x-r/2,n.y-s/2,r,s),u=new cc.Rect(o.x-a/2,o.y-c/2,a,c);return cc.Intersection.rectRect(l,u)},t}();i.default=r,cc._RF.pop()},{"./Tween":"Tween"}],Tween:[function(t,e,i){"use strict";cc._RF.push(e,"c1812TWgDxL9rRQRBc+TfTK","Tween"),Object.defineProperty(i,"__esModule",{value:!0}),i.SCALE_TWEEN=i.TWEEN=i.VERSION=i.Tween=i.Sequence=i.Interpolation=i.Group=i.Easing=void 0;var n=t("../cmpt/base/Timer");i.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-i.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*i.Easing.Bounce.In(2*t):.5*i.Easing.Bounce.Out(2*t-1)+.5}}};var o,r="undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},a=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map(function(e){return t._tweens[e]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},t.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},t.prototype.update=function(t,e){void 0===t&&(t=r()),void 0===e&&(e=!1);var i=Object.keys(this._tweens);if(0===i.length)return!1;for(var n=0;n<i.length;n++)(o=this._tweens[i[n]])&&!o.isCCObjectValid()&&o.stop();if(0===(i=Object.keys(this._tweens)).length)return!1;for(;i.length>0;){for(this._tweensAddedDuringUpdate={},n=0;n<i.length;n++){var o,a=!e;(o=this._tweens[i[n]])&&!1===o.update(t,a)&&!e&&delete this._tweens[i[n]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}();i.Group=a,i.Interpolation={Linear:function(t,e){var n=t.length-1,o=n*e,r=Math.floor(o),a=i.Interpolation.Utils.Linear;return e<0?a(t[0],t[1],o):e>1?a(t[n],t[n-1],n-o):a(t[r],t[r+1>n?n:r+1],o-r)},Bezier:function(t,e){for(var n=0,o=t.length-1,r=Math.pow,a=i.Interpolation.Utils.Bernstein,s=0;s<=o;s++)n+=r(1-e,o-s)*r(e,s)*t[s]*a(o,s);return n},CatmullRom:function(t,e){var n=t.length-1,o=n*e,r=Math.floor(o),a=i.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(r=Math.floor(o=n*(1+e))),a(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],o-r)):e<0?t[0]-(a(t[0],t[0],t[1],t[1],-o)-t[0]):e>1?t[n]-(a(t[n],t[n],t[n-1],t[n-1],o-n)-t[n]):a(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],o-r)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var n=i.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:(o=[1],function(t){var e=1;if(o[t])return o[t];for(var i=t;i>1;i--)e*=i;return o[t]=e,e}),CatmullRom:function(t,e,i,n,o){var r=.5*(i-t),a=.5*(n-e),s=o*o;return(2*e-2*i+r+a)*o*s+(-3*e+3*i-2*r-a)*s+r*o+e}}};var s=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}();i.Sequence=s;var c=new a,l=new a,u=function(){function t(t,e){void 0===e&&(e=c),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=i.Easing.Linear.None,this._interpolationFunction=i.Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=s.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return t.prototype.bindCCObject=function(t){this._ccObject=t},t.prototype.isCCObjectValid=function(){return!(this._object instanceof cc.Object&&!this._object.isValid||this._ccObject instanceof cc.Object&&!this._ccObject.isValid)},t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.to=function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},t.prototype.duration=function(t){return this._duration=t,this},t.prototype.start=function(t){if(this._isPlaying)return this;if(void 0===t&&(this._group===c?t=n.default.gameMs:this._group===l&&(t=n.default.scaleGameMs)),this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var e in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(e),this._valuesStart[e]=this._valuesStartRepeat[e];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==t?"string"==typeof t?r()+parseFloat(t):t:r(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},t.prototype._setupProperties=function(t,e,i,n){for(var o in i){var r=t[o],a=Array.isArray(r),s=a?"array":typeof r,c=!a&&Array.isArray(i[o]);if("undefined"!==s&&"function"!==s){if(c){var l=i[o];if(0===l.length)continue;l=l.map(this._handleRelativeValue.bind(this,r)),i[o]=[r].concat(l)}if("object"!==s&&!a||!r||c)void 0===e[o]&&(e[o]=r),a||(e[o]*=1),n[o]=c?i[o].slice().reverse():e[o]||0;else{for(var u in e[o]=a?[]:{},r)e[o][u]=r[u];n[o]=a?[]:{},this._setupProperties(r,e[o],i[o],n[o])}}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(t){return void 0===t&&(t=r()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this),this)},t.prototype.resume=function(t){return void 0===t&&(t=r()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},t.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},t.prototype.group=function(t){return this._group=t,this},t.prototype.delay=function(t){return this._delayTime=t,this},t.prototype.repeat=function(t){return this._initialRepeat=t,this._repeat=t,this},t.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},t.prototype.yoyo=function(t){return this._yoyo=t,this},t.prototype.easing=function(t){return this._easingFunction=t,this},t.prototype.interpolation=function(t){return this._interpolationFunction=t,this},t.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t=[];for(var i=0;i<arguments.length;i++)t[i]=arguments[i];return this._chainedTweens=t,this},t.prototype.onStart=function(t){return this._onStartCallback=t,this},t.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},t.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},t.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},t.prototype.onStop=function(t){return this._onStopCallback=t,this},t.prototype.update=function(t,e){if(void 0===t&&(t=r()),void 0===e&&(e=!0),this._isPaused)return!0;var i,n,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>o)return!1;e&&this.start(t)}if(this._goToEnd=!1,t<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(t-this._startTime)/this._duration,n=0===this._duration||n>1?1:n;var a=this._easingFunction(n);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,a),this._onUpdateCallback&&this._onUpdateCallback(this._object,n),1===n){if(this._repeat>0){for(i in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[i]||(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,c=this._chainedTweens.length;s<c;s++)this._chainedTweens[s].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(t,e,i,n){for(var o in i)if(void 0!==e[o]){var r=e[o]||0,a=i[o],s=Array.isArray(t[o]),c=Array.isArray(a);!s&&c?t[o]=this._interpolationFunction(a,n):"object"==typeof a&&a?this._updateProperties(t[o],r,a,n):"number"==typeof(a=this._handleRelativeValue(r,a))&&(t[o]=r+(a-r)*n)}},t.prototype._handleRelativeValue=function(t,e){return"string"!=typeof e?e:"+"===e.charAt(0)||"-"===e.charAt(0)?t+parseFloat(e):parseFloat(e)},t.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],i=this._valuesEnd[t];this._valuesStartRepeat[t]="string"==typeof i?this._valuesStartRepeat[t]+parseFloat(i):this._valuesEnd[t],this._valuesEnd[t]=e},t}();i.Tween=u,i.VERSION="18.6.4",s.nextId,i.TWEEN=c,i.SCALE_TWEEN=l,cc._RF.pop()},{"../cmpt/base/Timer":"Timer"}],Url:[function(t,e,i){"use strict";cc._RF.push(e,"a8f33QbcWNMTZ0PfOQy5Uvh","Url"),Object.defineProperty(i,"__esModule",{value:!0}),i.DirUrl=i.ResUrl=void 0,i.ResUrl={PREFAB:{TIP:"prefab/tip/Tip",HOME:"prefab/home/Home",GAME:"prefab/game/Game"},ATLAS:{EN:"textures/localizedImage/en/AutoAtlas",ZH:"textures/localizedImage/zh/AutoAtlas"},AUDIO:{BGM1:"audio/bgm1",BGM2:"audio/bgm2",SFX1:"audio/sfx1",SFX2:"audio/sfx2",SFX_UI:"audio/sfxUi"}},i.DirUrl={PREFAB:"prefab/",PREFAB_DIALOG:"prefab/dialog/",ATLAS:"atlas/",TEXTURE:"textures/",AUDIO:"audio/"},cc._RF.pop()},{}],UserData:[function(t,e,i){"use strict";cc._RF.push(e,"c41a48vCcJIjbq6U3DzN6ms","UserData"),Object.defineProperty(i,"__esModule",{value:!0}),i.UserData=void 0;i.UserData=function(){},cc._RF.pop()},{}],VirtualItem:[function(t,e,i){"use strict";cc._RF.push(e,"37390yL2g9Gx56ICLo3MK1K","VirtualItem");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.disallowMultiple,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dataIdx=0,e.args=null,e.others=[],e}return o(e,t),e.prototype.onRefresh=function(){},e.prototype.onRefreshOthers=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.onReset=function(){},e.prototype.getRealSize=function(){return this.node.getContentSize()},r([s,c],e)}(cc.Component);i.default=l,cc._RF.pop()},{}],VirtualLayout:[function(t,e,i){"use strict";cc._RF.push(e,"23c51D+ML1JI7Nz58WdBOmf","VirtualLayout");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a,s,c,l,u=t("../../../util/Res"),p=t("../../../util/Tool"),h=t("./VirtualItem"),f=t("./VirtualList"),d=cc._decorator,_=d.ccclass,y=d.property,m=d.disallowMultiple;(function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t[t.GRID=2]="GRID"})(a||(a={})),function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(s||(s={})),function(t){t[t.TOP_TO_BOTTOM=0]="TOP_TO_BOTTOM",t[t.BOTTOM_TO_TOP=1]="BOTTOM_TO_TOP"}(c||(c={})),function(t){t[t.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",t[t.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT"}(l||(l={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.VERTICAL,e.startAxis=s.HORIZONTAL,e.left=0,e.right=0,e.top=0,e.bottom=0,e.spacingX=0,e.spacingY=0,e.verticalDirection=c.TOP_TO_BOTTOM,e.horizontalDirection=l.LEFT_TO_RIGHT,e._list=null,e._view=null,e._viewEdge=null,e._fixedSize=null,e._sizeDirty=!1,e._viewDirty=!1,e._posDirty=!1,e._items=[],e._itemPool=[],e._otherItemsArr=[],e._otherItemPoolArr=[],e}return o(e,t),e.prototype.onInit=function(t){var e=this;this._list=t,this._view=this.node.parent,this._viewEdge=this.getNodeEdgeRect(this._view),this._otherItemsArr=[],this._otherItemPoolArr=[],this._list.others.forEach(function(){e._otherItemsArr.push([]),e._otherItemPoolArr.push([])}),null===this._fixedSize&&(this.addItemNode(!1),this._fixedSize=this._itemPool[0].getContentSize()),this.node.on(cc.Node.EventType.POSITION_CHANGED,this.onPositionChanged,this),this._view.on(cc.Node.EventType.SIZE_CHANGED,this.onViewSizeChanged,this)},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.POSITION_CHANGED,this.onPositionChanged,this),this._view.off(cc.Node.EventType.SIZE_CHANGED,this.onViewSizeChanged,this)},e.prototype.lateUpdate=function(){this.updatePos(),this.updateSize(),this.updateView()},e.prototype.updatePos=function(){var t=this;this._posDirty&&(this._posDirty=!1,this._list.others.forEach(function(e){e.content.position=t.node.position}))},e.prototype.updateSize=function(){this._sizeDirty&&(this._sizeDirty=!1,this._list.isFixedSize?this.updateSizeFixed():this.updateSizeUnfixed())},e.prototype.updateSizeFixed=function(){if(this.type===a.VERTICAL){if(this._list.argsArr.length<=0)return void(this.node.height=0);this.node.height=this.top+this.bottom+(this._list.argsArr.length-1)*this.spacingY+this._fixedSize.height*this._list.argsArr.length}else if(this.type===a.HORIZONTAL){if(this._list.argsArr.length<=0)return void(this.node.width=0);this.node.width=this.left+this.right+(this._list.argsArr.length-1)*this.spacingX+this._fixedSize.width*this._list.argsArr.length}else if(this.startAxis===s.HORIZONTAL){if(this._list.argsArr.length<=0)return void(this.node.height=0);var t=Math.floor((this.node.width-this.left-this.right+this.spacingX)/(this._fixedSize.width+this.spacingX));t=Math.max(t,1);var e=Math.ceil(this._list.argsArr.length/t);this.node.height=this.top+this.bottom+(e-1)*this.spacingY+this._fixedSize.height*e}else{if(this._list.argsArr.length<=0)return void(this.node.width=0);t=Math.floor((this.node.height-this.top-this.bottom+this.spacingY)/(this._fixedSize.height+this.spacingY)),t=Math.max(t,1);var i=Math.ceil(this._list.argsArr.length/t);this.node.width=this.left+this.right+(i-1)*this.spacingX+this._fixedSize.width*i}},e.prototype.updateSizeUnfixed=function(){var t=0;if(this.type===a.VERTICAL){if(this._list.argsArr.length<=0)return void(this.node.height=0);t=this.top+this.bottom+(this._list.argsArr.length-1)*this.spacingY;for(var e=0;e<this._list.argsArr.length;e++)t+=this.calcItemSizeUnfixed(e).height;this.node.height=t}else if(this.type===a.HORIZONTAL){if(this._list.argsArr.length<=0)return void(this.node.width=0);for(t=this.left+this.right+(this._list.argsArr.length-1)*this.spacingX,e=0;e<this._list.argsArr.length;e++)t+=this.calcItemSizeUnfixed(e).width;this.node.width=t}},e.prototype.updateView=function(){!this._viewDirty||this._list.argsArr.length<=0||(this._viewDirty=!1,this._list.isFixedSize?this.updateViewFixed():this.updateViewUnfixed())},e.prototype.updateViewFixed=function(){var t,e,i,n,o=this,r=this.checkViewItem(),u=r.inView,p=r.outView,f=this.getNodeEdgeRect(this.node);if(this.type===a.VERTICAL)for(var d=function(t){if(_.verticalDirection===c.TOP_TO_BOTTOM){if(i=f.yMax-(_.top+t*_.spacingY+_._fixedSize.height*t),n=i-_._fixedSize.height,i+_.node.y<_._viewEdge.yMin)return{value:void 0};if(n+_.node.y>_._viewEdge.yMax)return"continue"}else{if(n=f.yMin+_.bottom+t*_.spacingY+_._fixedSize.height*t,i=n+_._fixedSize.height,n+_.node.y>_._viewEdge.yMax)return{value:void 0};if(i+_.node.y<_._viewEdge.yMin)return"continue"}if(-1!==u.findIndex(function(e){return o._items[e].getComponent(h.default).dataIdx===t}))return"continue";var e=0===p.length?_.addItemNode():p.shift(),r=_._items[e];_.setItem(cc.v3(0,n+r.anchorY*r.height),t,e)},_=this,y=0;y<this._list.argsArr.length;y++){var m=d(y);if("object"==typeof m)return m.value}else if(this.type===a.HORIZONTAL){var g=function(i){if(v.horizontalDirection===l.RIGHT_TO_LEFT){if(t=f.xMax-(v.right+i*v.spacingX+v._fixedSize.width*i),e=t-v._fixedSize.width,t+v.node.x<v._viewEdge.xMin)return{value:void 0};if(e+v.node.x>v._viewEdge.xMax)return"continue"}else{if(e=f.xMin+v.left+i*v.spacingX+v._fixedSize.width*i,t=e+v._fixedSize.width,e+v.node.x>v._viewEdge.xMax)return{value:void 0};if(t+v.node.x<v._viewEdge.xMin)return"continue"}if(-1!==u.findIndex(function(t){return o._items[t].getComponent(h.default).dataIdx===i}))return"continue";var n=0===p.length?v.addItemNode():p.shift(),r=v._items[n];v.setItem(cc.v3(e+r.anchorX*r.width,0),i,n)},v=this;for(y=0;y<this._list.argsArr.length;y++){var b=g(y);if("object"==typeof b)return b.value}}else{var O=function(r){var a=0,d=0;if(M.startAxis===s.HORIZONTAL){var _=Math.floor((M.node.width-M.left-M.right+M.spacingX)/(M._fixedSize.width+M.spacingX));if(_=Math.max(_,1),a=Math.floor(r/_),d=r%_,M.verticalDirection===c.TOP_TO_BOTTOM){if(i=f.yMax-(M.top+a*M.spacingY+M._fixedSize.height*a),n=i-M._fixedSize.height,i+M.node.y<M._viewEdge.yMin)return{value:void 0};if(n+M.node.y>M._viewEdge.yMax)return"continue"}else{if(n=f.yMin+M.bottom+a*M.spacingY+M._fixedSize.height*a,i=n+M._fixedSize.height,n+M.node.y>M._viewEdge.yMax)return{value:void 0};if(i+M.node.y<M._viewEdge.yMin)return"continue"}if(M.horizontalDirection===l.RIGHT_TO_LEFT?(t=f.xMax-(M.right+d*M.spacingX+M._fixedSize.width*d),e=t-M._fixedSize.width):(e=f.xMin+M.left+d*M.spacingX+M._fixedSize.width*d,t=e+M._fixedSize.width),t+M.node.x<M._viewEdge.xMin||e+M.node.x>M._viewEdge.xMax)return"continue"}else{if(_=Math.floor((M.node.height-M.top-M.bottom+M.spacingY)/(M._fixedSize.height+M.spacingY)),_=Math.max(_,1),a=r%_,d=Math.floor(r/_),M.horizontalDirection===l.RIGHT_TO_LEFT){if(t=f.xMax-(M.right+d*M.spacingX+M._fixedSize.width*d),e=t-M._fixedSize.width,t+M.node.x<M._viewEdge.xMin)return{value:void 0};if(e+M.node.x>M._viewEdge.xMax)return"continue"}else{if(e=f.xMin+M.left+d*M.spacingX+M._fixedSize.width*d,t=e+M._fixedSize.width,e+M.node.x>M._viewEdge.xMax)return{value:void 0};if(t+M.node.x<M._viewEdge.xMin)return"continue"}if(M.verticalDirection===c.TOP_TO_BOTTOM?(i=f.yMax-(M.top+a*M.spacingY+M._fixedSize.height*a),n=i-M._fixedSize.height):(n=f.yMin+M.bottom+a*M.spacingY+M._fixedSize.height*a,i=n+M._fixedSize.height),i+M.node.y<M._viewEdge.yMin||n+M.node.y>M._viewEdge.yMax)return"continue"}if(-1!==u.findIndex(function(t){return o._items[t].getComponent(h.default).dataIdx===r}))return"continue";var y=0===p.length?M.addItemNode():p.shift(),m=M._items[y];M.setItem(cc.v3(e+m.anchorX*m.width,n+m.anchorY*m.height),r,y)},M=this;for(y=0;y<this._list.argsArr.length;y++){var w=O(y);if("object"==typeof w)return w.value}}},e.prototype.updateViewUnfixed=function(){var t,e,i,n,o=this,r=this.checkViewItem(),s=r.inView,u=r.outView,p=this.getNodeEdgeRect(this.node);if(this.type===a.VERTICAL)for(var f=0,d=function(t){var e=_.calcItemSizeUnfixed(t);if(f+=e.height,_.verticalDirection===c.TOP_TO_BOTTOM){if(i=p.yMax-(_.top+t*_.spacingY+(f-e.height)),n=i-e.height,i+_.node.y<_._viewEdge.yMin)return{value:void 0};if(n+_.node.y>_._viewEdge.yMax)return"continue"}else{if(n=p.yMin+_.bottom+t*_.spacingY+(f-e.height),i=n+e.height,n+_.node.y>_._viewEdge.yMax)return{value:void 0};if(i+_.node.y<_._viewEdge.yMin)return"continue"}if(-1!==s.findIndex(function(e){return o._items[e].getComponent(h.default).dataIdx===t}))return"continue";var r=0===u.length?_.addItemNode():u.shift(),a=_._items[r];_.setItem(cc.v3(0,n+a.anchorY*e.height),t,r)},_=this,y=0;y<this._list.argsArr.length;y++){var m=d(y);if("object"==typeof m)return m.value}else if(this.type===a.HORIZONTAL){var g=0,v=function(i){var n=b.calcItemSizeUnfixed(i);if(g+=n.width,b.horizontalDirection===l.RIGHT_TO_LEFT){if(t=p.xMax-(b.right+i*b.spacingX+(g-n.width)),e=t-n.width,t+b.node.x<b._viewEdge.xMin)return{value:void 0};if(e+b.node.x>b._viewEdge.xMax)return"continue"}else{if(e=p.xMin+b.left+i*b.spacingX+(g-n.width),t=e+n.width,e+b.node.x>b._viewEdge.xMax)return{value:void 0};if(t+b.node.x<b._viewEdge.xMin)return"continue"}if(-1!==s.findIndex(function(t){return o._items[t].getComponent(h.default).dataIdx===i}))return"continue";var r=0===u.length?b.addItemNode():u.shift(),a=b._items[r];b.setItem(cc.v3(e+a.anchorX*n.width,0),i,r)},b=this;for(y=0;y<this._list.argsArr.length;y++){var O=v(y);if("object"==typeof O)return O.value}}},e.prototype.checkViewItem=function(){var t=[],e=[];if(this.type===a.VERTICAL)for(var i=0;i<this._items.length;i++)(n=this._items[i].getBoundingBox()).yMin+this.node.y<=this._viewEdge.yMax&&n.yMax+this.node.y>=this._viewEdge.yMin?t.push(i):e.push(i);else if(this.type===a.HORIZONTAL)for(i=0;i<this._items.length;i++)(n=this._items[i].getBoundingBox()).xMin+this.node.x<=this._viewEdge.xMax&&n.xMax+this.node.x>=this._viewEdge.xMin?t.push(i):e.push(i);else for(i=0;i<this._items.length;i++){var n;(n=this._items[i].getBoundingBox()).xMin+this.node.x<=this._viewEdge.xMax&&n.xMax+this.node.x>=this._viewEdge.xMin&&n.yMin+this.node.y<=this._viewEdge.yMax&&n.yMax+this.node.y>=this._viewEdge.yMin?t.push(i):e.push(i)}return{inView:t,outView:e}},e.prototype.setItem=function(t,e,i){var n=this._items[i];n.position=t;var o=n.getComponent(h.default);if(o.dataIdx=e,o.args=this._list.argsArr[e],o.onRefresh(o.args),this._list.others.length>0){var r=[];this._otherItemsArr.forEach(function(e){e[i].position=t,r.push(e[i])}),o.others=r,o.onRefreshOthers.apply(o,o.others)}},e.prototype.addItemNode=function(t){var e=this;void 0===t&&(t=!0);var i=null;if(this._itemPool.length>0)(i=this._itemPool.pop()).opacity=255,this._items.push(i),this._otherItemPoolArr.forEach(function(t,i){var n=t.pop();n.opacity=255,e._otherItemsArr[i].push(n)});else{var n=this._list.main.templateType===f.MainTemplateType.PREFAB?this._list.main.templatePrefab:this._list.main.templateNode;(i=u.default.instantiate(n,this.node)).getComponent(h.default)||i.addComponent(h.default),this.node.addChild(i),t?(i.opacity=255,this._items.push(i)):this.putItemNode(i);var o=i.children.slice(0);this._list.others.forEach(function(i,n){var r=null;switch(i.templateType){case f.OtherTemplateType.NODE:r=u.default.instantiate(i.templateNode,e.node);break;case f.OtherTemplateType.PREFAB:r=u.default.instantiate(i.templatePrefab,e.node);break;case f.OtherTemplateType.MAIN_ITEM_CHILD:if(!p.default.inRange(0,o.length-1,i.templateChild))return void cc.error("[VirtualLayout.addItemNode] error e.templateChild: "+i.templateChild);(r=o[i.templateChild]).removeFromParent();break;default:return void cc.error("[VirtualLayout.addItemNode] error e.templateType: "+i.templateType)}i.content.addChild(r),t?(r.opacity=255,e._otherItemsArr[n].push(r)):e.putItemNode(r,!0,n)})}return this._items.length-1},e.prototype.putItemNode=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=0),t.opacity=0,t.setPosition(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),e?this._otherItemPoolArr[i].push(t):(t.getComponent(h.default).onReset(),this._itemPool.push(t))},e.prototype.convertToParentPos=function(t,e){return t.add(e.position)},e.prototype.convertToChildPos=function(t,e){return t.sub(e.position)},e.prototype.getNodeEdgeRect=function(t){return cc.rect(-t.width*t.anchorX,-t.height*t.anchorY,t.width,t.height)},e.prototype.calcItemSizeUnfixed=function(t){return this._list.calcItemSize?this._list.calcItemSize(this._list.argsArr[t]):this._fixedSize},e.prototype.onPositionChanged=function(){this._list.scrollView._outOfBoundaryAmountDirty=!0,this._viewDirty=!0,this._posDirty=!0},e.prototype.onViewSizeChanged=function(){this._viewEdge=this.getNodeEdgeRect(this._view)},e.prototype.getScrollOffset=function(t,e,i){return t=Math.min(t,this._list.argsArr.length-1),this._list.isFixedSize?this.getScrollOffsetFixed(t,e,i):this.getScrollOffsetUnfixed(t,e,i)},e.prototype.getScrollOffsetFixed=function(t,e,i){var n,o,r=this.getNodeEdgeRect(this.node);if(this.type===a.VERTICAL){this.verticalDirection===c.TOP_TO_BOTTOM?o=r.yMax-(this.top+t*this.spacingY+this._fixedSize.height*t)-this._fixedSize.height:(o=r.yMin+this.bottom+t*this.spacingY+this._fixedSize.height*t,this._fixedSize.height);var u=this._viewEdge.xMin-(r.xMin+this.node.x),p=r.yMax-(this._fixedSize.height*e.y+o)-(1-i.y)*this._viewEdge.height;return cc.v2(u,p)}if(this.type===a.HORIZONTAL)return this.horizontalDirection===l.RIGHT_TO_LEFT?n=r.xMax-(this.right+t*this.spacingX+this._fixedSize.width*t)-this._fixedSize.width:(n=r.xMin+this.left+t*this.spacingX+this._fixedSize.width*t,this._fixedSize.width),u=this._fixedSize.width*e.x+n-r.xMin-i.x*this._viewEdge.width,p=r.yMax-(this._viewEdge.yMax-this.node.y),cc.v2(u,p);var h=0,f=0;if(this.startAxis===s.HORIZONTAL){var d=Math.floor((this.node.width-this.left-this.right+this.spacingX)/(this._fixedSize.width+this.spacingX));d=Math.max(d,1),h=Math.floor(t/d),f=t%d}else d=Math.floor((this.node.height-this.top-this.bottom+this.spacingY)/(this._fixedSize.height+this.spacingY)),h=t%(d=Math.max(d,1)),f=Math.floor(t/d);return this.verticalDirection===c.TOP_TO_BOTTOM?o=r.yMax-(this.top+h*this.spacingY+this._fixedSize.height*h)-this._fixedSize.height:(o=r.yMin+this.bottom+h*this.spacingY+this._fixedSize.height*h,this._fixedSize.height),this.horizontalDirection===l.RIGHT_TO_LEFT?n=r.xMax-(this.right+f*this.spacingX+this._fixedSize.width*f)-this._fixedSize.width:(n=r.xMin+this.left+f*this.spacingX+this._fixedSize.width*f,this._fixedSize.width),u=this._fixedSize.width*e.x+n-r.xMin-i.x*this._viewEdge.width,p=r.yMax-(this._fixedSize.height*e.y+o)-(1-i.y)*this._viewEdge.height,cc.v2(u,p)},e.prototype.getScrollOffsetUnfixed=function(t,e,i){var n,o,r=this.getNodeEdgeRect(this.node),s=this.calcItemSizeUnfixed(t);if(this.type===a.VERTICAL){for(var u=0,p=0;p<t;p++)u+=this.calcItemSizeUnfixed(p).height;this.verticalDirection===c.TOP_TO_BOTTOM?o=r.yMax-(this.top+t*this.spacingY+u)-s.height:(o=r.yMin+this.bottom+t*this.spacingY+u,s.height);var h=this._viewEdge.xMin-(r.xMin+this.node.x),f=r.yMax-(s.height*e.y+o)-(1-i.y)*this._viewEdge.height;return cc.v2(h,f)}if(this.type===a.HORIZONTAL){var d=0;for(p=0;p<t;p++)d+=this.calcItemSizeUnfixed(p).width;return this.horizontalDirection===l.RIGHT_TO_LEFT?n=r.xMax-(this.right+t*this.spacingX+d)-s.width:(n=r.xMin+this.left+t*this.spacingX+d,s.width),h=s.width*e.x+n-r.xMin-i.x*this._viewEdge.width,f=r.yMax-(this._viewEdge.yMax-this.node.y),cc.v2(h,f)}return null},e.prototype.rearrange=function(t){var e=this;void 0===t&&(t=!0),this._sizeDirty=!0,this._viewDirty=!0,t&&(this._items.forEach(function(t,i){e.putItemNode(t),e._otherItemsArr.forEach(function(t,n){e.putItemNode(t[i],!0,n)})}),this._items.length=0,this._otherItemsArr.forEach(function(t){t.length=0}))},e.prototype.refreshAllItems=function(){var t=this;this._items.forEach(function(e){var i=e.getComponent(h.default);i.onRefresh(i.args),t._list.others.length>0&&i.onRefreshOthers.apply(i,i.others)})},r([y({type:cc.Enum(a),tooltip:!1})],e.prototype,"type",void 0),r([y({type:cc.Enum(s),tooltip:!1,visible:function(){return this.type===a.GRID}})],e.prototype,"startAxis",void 0),r([y({visible:function(){return this.type===a.HORIZONTAL||this.type===a.GRID}})],e.prototype,"left",void 0),r([y({visible:function(){return this.type===a.HORIZONTAL||this.type===a.GRID}})],e.prototype,"right",void 0),r([y({visible:function(){return this.type===a.VERTICAL||this.type===a.GRID}})],e.prototype,"top",void 0),r([y({visible:function(){return this.type===a.VERTICAL||this.type===a.GRID}})],e.prototype,"bottom",void 0),r([y({visible:function(){return this.type===a.HORIZONTAL||this.type===a.GRID}})],e.prototype,"spacingX",void 0),r([y({visible:function(){return this.type===a.VERTICAL||this.type===a.GRID}})],e.prototype,"spacingY",void 0),r([y({type:cc.Enum(c),visible:function(){return this.type===a.VERTICAL||this.type===a.GRID}})],e.prototype,"verticalDirection",void 0),r([y({type:cc.Enum(l),visible:function(){return this.type===a.HORIZONTAL||this.type===a.GRID}})],e.prototype,"horizontalDirection",void 0),r([_,m],e)}(cc.Component);i.default=g,cc._RF.pop()},{"../../../util/Res":"Res","../../../util/Tool":"Tool","./VirtualItem":"VirtualItem","./VirtualList":"VirtualList"}],VirtualList:[function(t,e,i){"use strict";cc._RF.push(e,"8815fg/3FJEjohj/PrC9n21","VirtualList");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(i,"__esModule",{value:!0}),i.OtherLayoutData=i.MainLayoutData=i.OtherTemplateType=i.MainTemplateType=void 0,t("../../../util/EditorTool");var s,c,l=t("../../../util/Tool"),u=t("./VirtualLayout"),p=cc._decorator,h=p.ccclass,f=p.property,d=p.requireComponent,_=p.executeInEditMode,y=p.disallowMultiple,m=p.menu;(function(t){t[t.NODE=0]="NODE",t[t.PREFAB=1]="PREFAB"})(s=i.MainTemplateType||(i.MainTemplateType={})),function(t){t[t.NODE=0]="NODE",t[t.PREFAB=1]="PREFAB",t[t.MAIN_ITEM_CHILD=2]="MAIN_ITEM_CHILD"}(c=i.OtherTemplateType||(i.OtherTemplateType={}));var g=function(){function t(){this.content=null,this._templateType=s.PREFAB,this._templatePrefab=null,this._templateNode=null,this.editorCall=null}return Object.defineProperty(t.prototype,"templateType",{get:function(){return this._templateType},set:function(t){this._templateType!==t&&(this._templateType=t,this.resetMainItemChild(!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templatePrefab",{get:function(){return this._templatePrefab},set:function(t){this._templatePrefab!==t&&(this._templatePrefab=t,this.resetMainItemChild(!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateNode",{get:function(){return this._templateNode},set:function(t){this._templateNode!==t&&(this._templateNode=t,this.resetMainItemChild(!0))},enumerable:!1,configurable:!0}),t.prototype.resetMainItemChild=function(t){void 0===t&&(t=!1)},r([f({type:cc.Node,tooltip:!1,visible:function(){return!1}})],t.prototype,"content",void 0),r([f({type:cc.Enum(s)})],t.prototype,"_templateType",void 0),r([f({type:cc.Enum(s),tooltip:!1})],t.prototype,"templateType",null),r([f(cc.Prefab)],t.prototype,"_templatePrefab",void 0),r([f({type:cc.Prefab,tooltip:!1,visible:function(){return this.templateType===s.PREFAB}})],t.prototype,"templatePrefab",null),r([f(cc.Node)],t.prototype,"_templateNode",void 0),r([f({type:cc.Node,tooltip:!1,visible:function(){return this.templateType===s.NODE}})],t.prototype,"templateNode",null),r([h("MainLayoutData")],t)}();i.MainLayoutData=g;var v=function(){function t(){this.content=null,this.templateType=c.PREFAB,this.templatePrefab=null,this.templateNode=null,this.templateChild=-1}return r([f({type:cc.Node,tooltip:!1})],t.prototype,"content",void 0),r([f({type:cc.Enum(c),tooltip:!1})],t.prototype,"templateType",void 0),r([f({type:cc.Prefab,tooltip:!1,visible:function(){return this.templateType===c.PREFAB}})],t.prototype,"templatePrefab",void 0),r([f({type:cc.Node,tooltip:!1,visible:function(){return this.templateType===c.NODE}})],t.prototype,"templateNode",void 0),r([f({type:cc.Enum({}),tooltip:!1,visible:function(){return this.templateType===c.MAIN_ITEM_CHILD}})],t.prototype,"templateChild",void 0),r([h("OtherLayoutData")],t)}();i.OtherLayoutData=v;var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.main=new g,e.others=[],e.isFixedSize=!0,e._scrollView=null,e._layout=null,e._argsArr=[],e._calcItemSize=null,e}return o(e,t),Object.defineProperty(e.prototype,"scrollView",{get:function(){return this._scrollView||(this._scrollView=this.getComponent(cc.ScrollView)),this._scrollView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout||(this._layout=this.scrollView.content.getComponent(u.default)),this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"argsArr",{get:function(){return this._argsArr},set:function(t){this._argsArr=t,this.layout.rearrange()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"calcItemSize",{get:function(){return this._calcItemSize},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.layout&&this.layout.onInit(this)},e.prototype.resetInEditor=function(){this.runEditor()},e.prototype.onFocusInEditor=function(){this.main.resetMainItemChild()},e.prototype.runEditor=function(){},e.prototype.scrollItemToView=function(t,e,i,n,o){void 0===e&&(e=cc.v2()),void 0===i&&(i=cc.v2()),void 0===n&&(n=0),void 0===o&&(o=!0),this.scrollView.scrollToOffset(this.layout.getScrollOffset(t,e,i),n,o)},e.prototype.scrollToTop=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!0),this.scrollView.scrollToTop(t,e)},e.prototype.scrollToBottom=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!0),this.scrollView.scrollToBottom(t,e)},e.prototype.scrollToLeft=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!0),this.scrollView.scrollToLeft(t,e)},e.prototype.scrollToRight=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!0),this.scrollView.scrollToRight(t,e)},e.prototype.setCalcItemSize=function(t){this._calcItemSize=t},e.prototype.refreshAllItems=function(){this.layout.refreshAllItems()},e.prototype.reset=function(t,e){l.default.inRange(0,this._argsArr.length-1,t)&&(this._argsArr[t]=e,this.layout.rearrange())},e.prototype.push=function(t){var e=this._argsArr.push(t);return this.layout.rearrange(!1),e},e.prototype.pop=function(){var t=this._argsArr.pop();return this.layout.rearrange(),t},e.prototype.unshift=function(t){var e=this._argsArr.unshift(t);return this.layout.rearrange(),e},e.prototype.shift=function(){var t=this._argsArr.shift();return this.layout.rearrange(),t},e.prototype.splice=function(t,e){for(var i,n,o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];return n=void 0===e?this._argsArr.splice(t):void 0===o||0===o.length?this._argsArr.splice(t,e):(i=this._argsArr).splice.apply(i,a([t,e],o)),this.layout.rearrange(),n},e.prototype.sort=function(t){var e=this._argsArr.sort(t);return this.layout.rearrange(),e},e.prototype.filter=function(t){return this._argsArr=this._argsArr.filter(t),this.layout.rearrange(),this._argsArr},r([f({type:g,tooltip:!1})],e.prototype,"main",void 0),r([f({type:v,tooltip:!1})],e.prototype,"others",void 0),r([f({tooltip:!1})],e.prototype,"isFixedSize",void 0),r([h,y,_,d(cc.ScrollView),m("Framework/UI\u7ec4\u4ef6/VirtualList")],e)}(cc.Component);i.default=b,cc._RF.pop()},{"../../../util/EditorTool":"EditorTool","../../../util/Tool":"Tool","./VirtualLayout":"VirtualLayout"}],Zh:[function(t,e,i){"use strict";cc._RF.push(e,"5cb62aDaJtA4pHlrSAKjTY2","Zh"),Object.defineProperty(i,"__esModule",{value:!0}),i.default={lang:"\u4e2d\u6587",text1:"\u6570\u5b57\uff1a%{num}",text2:"\u53c2\u65701: %{arg1}, \u53c2\u65702: %{arg2}"},cc._RF.pop()},{}]},{},["AnimatorAnimation","AnimatorCustomization","AnimatorBase","AnimatorCondition","AnimatorController","AnimatorParams","AnimatorState","AnimatorStateLogic","AnimatorTransition","DialogBase","Layer","Timer","Tip","ShaderFill","ShaderOutline","ShaderShining","ShaderTile","CountdownLabel","MargeAnim","ShakeNode","AdaptCanvas","AdaptSize","AnimValue","AnimValueLabel","AnimValueProgress","AnimValueProgressHP","ButtonChildGray","ButtonChildPos","ButtonSingle","I18nLabel","I18nSprite","MultiSprite","MultiTextureManager","MultiAssembler","MultiAssemblerBarFilled","MultiAssemblerRadialFilled","MultiAssemblerSimple","MultiAssemblerSliced","MultiAssemblerTiled","ResSprite","CircleList","LoopList","VirtualItem","VirtualLayout","VirtualList","En","Zh","EventName","Url","ButtonHack","EditorBoxHack","AudioManager","Decorator","EditorTool","Events","I18n","Random","RecyclePool","Res","Tool","Tween","BuildsInfo","BuildsItem","Data","Drag","GameMgr","GameScene","UserData","DataManager","SystemManager","DlgUpLevel","Game","Home","Main"]);